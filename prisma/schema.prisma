generator client {
  provider      = "prisma-client"
  output        = "../lib/generated/prisma"
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model migrations {
  id                Int
  migration_name    String    @unique @db.VarChar(255)
  applied_at        DateTime? @default(now()) @db.Timestamptz(6)
  checksum          String?   @db.VarChar(64)
  execution_time_ms Int?
  notes             String?

  @@map("_migrations")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model activity_partners {
  id                        Int
  brand_id                  Int?
  partner_type              String    @default("referral") @db.VarChar(50)
  activity_types            String[]
  referral_tracking_enabled Boolean?  @default(true)
  commission_rate           Decimal?  @db.Decimal(5, 2)
  created_at                DateTime? @default(now()) @db.Timestamptz(6)
  updated_at                DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model additional_services {
  id            Int
  name          String    @db.VarChar(255)
  description   String?
  price         Decimal   @db.Decimal(10, 2)
  is_active     Boolean?  @default(true)
  display_order Int?      @default(0)
  icon          String?   @default("âœ¨") @db.VarChar(50)
  created_at    DateTime? @default(now()) @db.Timestamptz(6)
  updated_at    DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model ai_fine_tuning_jobs {
  id                      Int
  provider                String    @db.VarChar(50)
  base_model              String    @db.VarChar(100)
  job_id                  String?   @db.VarChar(255)
  fine_tuned_model        String?   @db.VarChar(255)
  model_name              String?   @db.VarChar(100)
  description             String?
  training_file_id        String?   @db.VarChar(255)
  training_examples_count Int?
  status                  String?   @db.VarChar(50)
  error_message           String?
  estimated_cost          Decimal?  @db.Decimal(10, 2)
  actual_cost             Decimal?  @db.Decimal(10, 2)
  created_by              Int?
  created_at              DateTime? @default(now()) @db.Timestamp(6)
  started_at              DateTime? @db.Timestamp(6)
  completed_at            DateTime? @db.Timestamp(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model ai_queries {
  id                    Int
  session_id            String    @db.VarChar(255)
  user_id               Int?
  query_text            String
  query_intent          String?   @db.VarChar(100)
  query_hash            String?   @db.VarChar(64)
  provider              String    @db.VarChar(50)
  model                 String    @db.VarChar(100)
  model_version         String?   @db.VarChar(50)
  system_prompt_hash    String?   @db.VarChar(64)
  response_text         String
  input_tokens          Int?
  output_tokens         Int?
  total_tokens          Int?
  response_time_ms      Int?
  api_cost              Decimal?  @db.Decimal(10, 6)
  ab_test_group         String?   @db.VarChar(1)
  user_rating           Int?
  user_feedback_text    String?
  user_clicked_result   Boolean?  @default(false)
  clicked_item_id       Int?
  clicked_item_type     String?   @db.VarChar(50)
  resulted_in_booking   Boolean?  @default(false)
  booking_id            Int?
  booking_value         Decimal?  @db.Decimal(10, 2)
  admin_rating          String?   @db.VarChar(20)
  admin_notes           String?
  approved_for_training Boolean?  @default(false)
  edited_response       String?
  created_at            DateTime? @default(now()) @db.Timestamp(6)
  reviewed_at           DateTime? @db.Timestamp(6)
  visitor_id            Int?

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model ai_query_cache {
  id                 Int
  query_hash         String    @db.VarChar(64)
  query_text         String
  model              String    @db.VarChar(100)
  system_prompt_hash String?   @db.VarChar(64)
  response_text      String
  response_data      Json?
  hit_count          Int?      @default(1)
  created_at         DateTime? @default(now()) @db.Timestamp(6)
  last_hit_at        DateTime? @default(now()) @db.Timestamp(6)
  expires_at         DateTime  @db.Timestamp(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model ai_settings {
  id                 Int
  provider           String    @db.VarChar(50)
  model              String    @db.VarChar(100)
  display_name       String?   @db.VarChar(100)
  temperature        Decimal?  @default(0.7) @db.Decimal(3, 2)
  max_tokens         Int?      @default(600)
  system_prompt      String?
  is_active          Boolean?  @default(false)
  is_fallback        Boolean?  @default(false)
  ab_test_enabled    Boolean?  @default(false)
  ab_test_percentage Int?
  ab_test_group      String?   @db.VarChar(1)
  created_at         DateTime? @default(now()) @db.Timestamp(6)
  updated_at         DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model availability_rules {
  id                      Int
  name                    String    @db.VarChar(255)
  rule_type               String    @db.VarChar(50)
  buffer_minutes          Int?
  applies_to              String?   @db.VarChar(50)
  blackout_date           DateTime? @db.Date
  blackout_start_date     DateTime? @db.Date
  blackout_end_date       DateTime? @db.Date
  reason                  String?
  max_daily_bookings      Int?
  max_concurrent_bookings Int?
  is_active               Boolean?  @default(true)
  created_by              Int?
  created_at              DateTime  @default(now()) @db.Timestamp(6)
  updated_at              DateTime  @default(now()) @db.Timestamp(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model booking_line_items {
  id                   String    @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  booking_id           Int
  service_type_id      String?   @db.Uuid
  description          String    @db.VarChar(500)
  provider_entity_id   String    @db.Uuid
  quantity             Decimal?  @default(1) @db.Decimal(10, 2)
  unit_price           Decimal   @db.Decimal(10, 2)
  total_price          Decimal   @db.Decimal(10, 2)
  tax_rate             Decimal?  @default(0) @db.Decimal(5, 4)
  tax_amount           Decimal?  @default(0) @db.Decimal(10, 2)
  commission_rate      Decimal?  @default(0) @db.Decimal(5, 4)
  commission_amount    Decimal?  @default(0) @db.Decimal(10, 2)
  commission_entity_id String?   @db.Uuid
  status               String?   @default("pending") @db.VarChar(20)
  notes                String?
  metadata             Json?     @default("{}")
  created_at           DateTime? @default(now()) @db.Timestamptz(6)
  updated_at           DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model booking_sources {
  id              String    @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  code            String    @db.VarChar(50)
  name            String    @db.VarChar(100)
  description     String?
  owner_entity_id String?   @db.Uuid
  commission_rate Decimal?  @db.Decimal(5, 4)
  commission_type String?   @default("percentage") @db.VarChar(20)
  source_url      String?   @db.VarChar(500)
  is_active       Boolean?  @default(true)
  created_at      DateTime? @default(now()) @db.Timestamptz(6)
  updated_at      DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model booking_timeline {
  id                Int
  booking_id        Int
  event_type        String   @db.VarChar(100)
  event_description String?
  event_data        Json?
  created_by        Int?
  created_at        DateTime @default(now()) @db.Timestamp(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model booking_wineries {
  id                         Int
  booking_id                 Int
  winery_id                  Int
  visit_order                Int
  estimated_arrival_time     DateTime? @db.Time(6)
  estimated_duration_minutes Int?      @default(60)
  actual_arrival_time        DateTime? @db.Timestamp(6)
  actual_departure_time      DateTime? @db.Timestamp(6)
  notes                      String?
  created_at                 DateTime  @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bookings {
  id                        Int               @id @default(autoincrement())
  booking_number            String            @db.VarChar(50)
  customer_id               Int?
  customer_name             String            @db.VarChar(255)
  customer_email            String            @db.VarChar(255)
  customer_phone            String?           @db.VarChar(20)
  party_size                Int
  tour_date                 DateTime          @db.Date
  start_time                DateTime?         @db.Time(6)
  end_time                  DateTime?         @db.Time(6)
  duration_hours            Decimal?          @db.Decimal(3, 1)
  pickup_location           String?           @db.VarChar(500)
  dropoff_location          String?           @db.VarChar(500)
  special_requests          String?
  driver_id                 Int?
  vehicle_id                Int?
  time_card_id              Int?
  base_price                Decimal?          @db.Decimal(10, 2)
  gratuity                  Decimal?          @default(0) @db.Decimal(10, 2)
  taxes                     Decimal?          @default(0) @db.Decimal(10, 2)
  total_price               Decimal?          @db.Decimal(10, 2)
  deposit_amount            Decimal?          @db.Decimal(10, 2)
  deposit_paid              Boolean?          @default(false)
  deposit_paid_at           DateTime?         @db.Timestamp(6)
  final_payment_amount      Decimal?          @db.Decimal(10, 2)
  final_payment_paid        Boolean?          @default(false)
  final_payment_paid_at     DateTime?         @db.Timestamp(6)
  status                    String            @default("pending") @db.VarChar(50)
  cancellation_reason       String?
  cancelled_at              DateTime?         @db.Timestamp(6)
  cancelled_by              Int?
  booking_source            String?           @default("online") @db.VarChar(50)
  booked_by                 Int?
  created_at                DateTime          @default(now()) @db.Timestamp(6)
  updated_at                DateTime          @default(now()) @db.Timestamp(6)
  completed_at              DateTime?         @db.Timestamp(6)
  actual_hours              Decimal?          @db.Decimal(5, 2)
  estimated_hours           Decimal?          @default(6.0) @db.Decimal(5, 2)
  hourly_rate               Decimal?          @default(150.00) @db.Decimal(10, 2)
  ready_for_final_invoice   Boolean?          @default(false)
  final_invoice_sent        Boolean?          @default(false)
  final_invoice_sent_at     DateTime?         @db.Timestamp(6)
  final_invoice_approved_by Int?
  final_invoice_approved_at DateTime?         @db.Timestamp(6)
  brand_id                  Int?
  brand_code                String?           @db.VarChar(20)
  specific_social_media     String?           @db.VarChar(50)
  specific_ai               String?           @db.VarChar(50)
  wine_tour_preference      String?           @db.VarChar(50)
  hotel_concierge_name      String?           @db.VarChar(255)
  referral_other_details    String?
  tour_type                 String?           @default("wine_tour") @db.VarChar(50)
  referral_source           String?           @db.VarChar(50)
  tour_duration_type        String?           @default("single") @db.VarChar(20)
  tour_start_date           DateTime?         @db.Date
  tour_end_date             DateTime?         @db.Date
  tenant_id                 Int?
  provider_id               Int?
  reminder_sent             Boolean?          @default(false)
  provider_entity_id        String?           @db.Uuid
  booking_source_id         String?           @db.Uuid
  referrer_entity_id        String?           @db.Uuid
  source                    String?           @db.VarChar(50)
  google_calendar_event_id  String?           @db.VarChar(255)
  google_calendar_synced_at DateTime?         @db.Timestamp(6)
  crm_deals                 crm_deals[]
  driver_tips               driver_tips[]
  tour_completions          tour_completions?
  tour_expenses             tour_expenses[]
  trip_proposals            trip_proposals[]

  @@index([brand_id], map: "idx_bookings_brand")
  @@index([created_at(sort: Desc)], map: "idx_bookings_created_at")
  @@index([customer_id, created_at(sort: Desc)], map: "idx_bookings_customer_created")
  @@index([customer_email], map: "idx_bookings_customer_email")
  @@index([customer_id], map: "idx_bookings_customer_id")
  @@index([driver_id], map: "idx_bookings_driver")
  @@index([provider_id], map: "idx_bookings_provider")
  @@index([provider_entity_id], map: "idx_bookings_provider_entity")
  @@index([referral_source], map: "idx_bookings_referral_source")
  @@index([booking_source_id], map: "idx_bookings_source")
  @@index([status], map: "idx_bookings_status")
  @@index([tenant_id], map: "idx_bookings_tenant")
  @@index([tour_date], map: "idx_bookings_tour_date")
  @@index([tour_duration_type], map: "idx_bookings_tour_duration_type")
  @@index([tour_end_date], map: "idx_bookings_tour_end_date")
  @@index([tour_start_date], map: "idx_bookings_tour_start_date")
  @@index([tour_type], map: "idx_bookings_tour_type")
  @@index([vehicle_id], map: "idx_bookings_vehicle")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model brand_email_templates {
  id            Int
  brand_id      Int?
  template_type String    @db.VarChar(50)
  subject_line  String
  html_body     String
  text_body     String
  active        Boolean?  @default(true)
  created_at    DateTime? @default(now()) @db.Timestamp(6)
  updated_at    DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model brand_metrics {
  id                   Int
  brand_id             Int?
  metric_date          DateTime  @db.Date
  website_visits       Int?      @default(0)
  booking_page_visits  Int?      @default(0)
  reservations_created Int?      @default(0)
  bookings_created     Int?      @default(0)
  conversion_rate      Decimal?  @db.Decimal(5, 2)
  total_revenue        Decimal?  @default(0) @db.Decimal(10, 2)
  avg_booking_value    Decimal?  @db.Decimal(10, 2)
  new_customers        Int?      @default(0)
  repeat_customers     Int?      @default(0)
  created_at           DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model brands {
  id                      Int              @id
  brand_code              String           @db.VarChar(20)
  brand_name              String           @db.VarChar(100)
  display_name            String           @db.VarChar(100)
  legal_name              String?          @db.VarChar(255)
  tagline                 String?
  website_url             String?          @db.VarChar(255)
  booking_url             String?          @db.VarChar(255)
  email_from              String?          @db.VarChar(255)
  email_support           String?          @db.VarChar(255)
  phone                   String?          @db.VarChar(20)
  phone_display           String?          @db.VarChar(50)
  logo_url                String?          @db.VarChar(255)
  icon_url                String?          @db.VarChar(255)
  primary_color           String?          @db.VarChar(7)
  secondary_color         String?          @db.VarChar(7)
  accent_color            String?          @db.VarChar(7)
  target_market           String?
  description             String?
  meta_description        String?
  short_description       String?
  terms_url               String?          @db.VarChar(255)
  cancellation_policy_url String?          @db.VarChar(255)
  active                  Boolean?         @default(true)
  show_on_wwt             Boolean?         @default(true)
  default_brand           Boolean?         @default(false)
  operating_entity        String?          @db.VarChar(255)
  insurance_policy_number String?          @db.VarChar(100)
  license_number          String?          @db.VarChar(100)
  created_at              DateTime?        @default(now()) @db.Timestamp(6)
  updated_at              DateTime?        @default(now()) @db.Timestamp(6)
  tenant_id               Int?
  brand_type              String?          @default("tour_provider") @db.VarChar(50)
  is_featured             Boolean?         @default(false)
  trip_proposals          trip_proposals[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model business_activity_log {
  id                   Int
  business_id          Int
  activity_type        String    @db.VarChar(100)
  activity_description String?
  metadata             Json?
  ip_address           String?   @db.VarChar(45)
  user_agent           String?
  created_at           DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model business_attributes {
  id               Int
  business_id      Int
  attribute_type   String    @db.VarChar(100)
  attribute_key    String    @db.VarChar(200)
  attribute_value  String
  source           String    @db.VarChar(50)
  source_id        Int?
  confidence_score Decimal?  @db.Decimal(5, 2)
  verified         Boolean?  @default(false)
  verified_by      Int?
  verified_at      DateTime? @db.Timestamp(6)
  created_at       DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model business_content {
  id           Int
  business_id  Int?
  content_type String                 @db.VarChar(50)
  title        String?                @db.VarChar(255)
  content      String
  metadata     Json?
  embedding    Unsupported("vector")?
  created_at   DateTime?              @default(now()) @db.Timestamptz(6)
  updated_at   DateTime?              @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model business_discrepancies {
  id                   Int
  business_id          Int
  discrepancy_id       String    @db.VarChar(200)
  type                 String    @db.VarChar(50)
  severity             String    @db.VarChar(20)
  title                String    @db.VarChar(500)
  description          String
  sources              Json?
  suggested_resolution String?
  draft_message        String?
  status               String?   @default("pending") @db.VarChar(50)
  resolved_at          DateTime? @db.Timestamp(6)
  resolved_by          Int?
  resolution_notes     String?
  created_at           DateTime? @default(now()) @db.Timestamp(6)
  updated_at           DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model business_files {
  id                     Int
  business_id            Int
  file_type              String    @db.VarChar(50)
  original_filename      String    @db.VarChar(500)
  storage_url            String
  file_size_bytes        BigInt?
  mime_type              String?   @db.VarChar(100)
  processing_status      String?   @default("pending") @db.VarChar(50)
  processed_at           DateTime? @db.Timestamp(6)
  extracted_text         String?
  ai_description         String?
  ai_tags                String[]
  thumbnail_url          String?   @db.VarChar(500)
  width                  Int?
  height                 Int?
  video_duration_seconds Int?
  video_thumbnail_url    String?   @db.VarChar(500)
  video_transcription    String?
  category               String?   @db.VarChar(100)
  display_order          Int?      @default(0)
  is_featured            Boolean?  @default(false)
  approved               Boolean?  @default(false)
  reviewed_by            Int?
  reviewed_at            DateTime? @db.Timestamp(6)
  admin_notes            String?
  uploaded_at            DateTime? @default(now()) @db.Timestamp(6)
  created_at             DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model business_portal {
  id                    Int
  business_id           Int?
  user_id               Int?
  access_level          String?   @default("editor") @db.VarChar(20)
  notifications_enabled Boolean?  @default(true)
  email_frequency       String?   @default("daily") @db.VarChar(20)
  last_login_at         DateTime? @db.Timestamptz(6)
  login_count           Int?      @default(0)
  is_active             Boolean?  @default(true)
  invited_at            DateTime? @db.Timestamptz(6)
  accepted_at           DateTime? @db.Timestamptz(6)
  invited_by            Int?
  created_at            DateTime? @default(now()) @db.Timestamptz(6)
  updated_at            DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model business_text_entries {
  id                Int
  business_id       Int
  question_id       Int?
  question_number   Int?
  question_text     String?
  response_text     String
  extracted_data    Json?
  extraction_status String?   @default("pending") @db.VarChar(50)
  extracted_at      DateTime? @db.Timestamp(6)
  approved          Boolean?  @default(false)
  reviewed_by       Int?
  reviewed_at       DateTime? @db.Timestamp(6)
  admin_notes       String?
  submitted_at      DateTime? @default(now()) @db.Timestamp(6)
  created_at        DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model business_voice_entries {
  id                       Int
  business_id              Int
  question_id              Int?
  question_number          Int?
  question_text            String?
  audio_url                String?   @db.VarChar(500)
  audio_duration_seconds   Int?
  audio_size_bytes         BigInt?
  transcription            String?
  transcription_confidence Decimal?  @db.Decimal(5, 2)
  transcribed_at           DateTime? @db.Timestamp(6)
  extracted_data           Json?
  extraction_status        String?   @default("pending") @db.VarChar(50)
  extracted_at             DateTime? @db.Timestamp(6)
  approved                 Boolean?  @default(false)
  reviewed_by              Int?
  reviewed_at              DateTime? @db.Timestamp(6)
  admin_notes              String?
  recorded_at              DateTime? @default(now()) @db.Timestamp(6)
  created_at               DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model businesses {
  id                          Int                           @id
  business_type               String                        @db.VarChar(50)
  name                        String                        @db.VarChar(200)
  slug                        String                        @db.VarChar(250)
  contact_name                String?                       @db.VarChar(200)
  contact_email               String?                       @db.VarChar(200)
  contact_phone               String?                       @db.VarChar(50)
  unique_code                 String                        @db.VarChar(50)
  portal_password             String?                       @db.VarChar(255)
  status                      String?                       @default("invited") @db.VarChar(50)
  completion_percentage       Int?                          @default(0)
  invited_by                  Int?
  invited_at                  DateTime?                     @db.Timestamp(6)
  first_access_at             DateTime?                     @db.Timestamp(6)
  last_activity_at            DateTime?                     @db.Timestamp(6)
  submitted_at                DateTime?                     @db.Timestamp(6)
  approved_at                 DateTime?                     @db.Timestamp(6)
  approved_by                 Int?
  address                     String?
  city                        String?                       @default("Walla Walla") @db.VarChar(100)
  state                       String?                       @default("WA") @db.VarChar(2)
  zip                         String?                       @db.VarChar(10)
  website                     String?                       @db.VarChar(500)
  allow_ai_directory          Boolean?                      @default(true)
  public_profile              Boolean?                      @default(false)
  created_at                  DateTime?                     @default(now()) @db.Timestamp(6)
  updated_at                  DateTime?                     @default(now()) @db.Timestamp(6)
  embedding                   Unsupported("vector")?
  price_range                 String?                       @db.VarChar(10)
  phone                       String?                       @db.VarChar(50)
  email                       String?                       @db.VarChar(255)
  short_description           String?
  latitude                    Decimal?                      @db.Decimal(10, 8)
  longitude                   Decimal?                      @db.Decimal(11, 8)
  hours_of_operation          Json?
  photos                      Json?                         @default("[]")
  invite_token                String?                       @db.VarChar(100)
  invite_token_expires_at     DateTime?                     @db.Timestamp(6)
  invitation_email_sent       Boolean?                      @default(false)
  invitation_email_sent_at    DateTime?                     @db.Timestamp(6)
  partner_profile_id          Int?
  claimed_at                  DateTime?                     @db.Timestamp(6)
  claimed_by                  Int?
  data_source                 String?                       @default("manual") @db.VarChar(50)
  import_batch_id             String?                       @db.VarChar(50)
  data_confidence             Int?                          @default(100)
  last_verified_at            DateTime?                     @db.Timestamp(6)
  verified_by                 Int?
  winery_id                   Int?
  hotel_id                    Int?
  restaurant_id               Int?
  notes                       String?
  admin_notes                 String?
  business_invitation_history business_invitation_history[]

  @@index([status], map: "idx_businesses_status")
  @@index([business_type], map: "idx_businesses_type")
  @@index([city], map: "idx_businesses_city")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model client_notes {
  id               Int
  workflow_id      Int?
  driver_id        Int
  client_name      String?   @db.VarChar(255)
  visit_time       DateTime? @db.Timestamp(6)
  pickup_location  String?
  dropoff_location String?
  passenger_count  Int?      @default(1)
  notes            String?
  special_requests String?
  created_at       DateTime  @default(now()) @db.Timestamp(6)
  updated_at       DateTime  @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model client_services {
  id               Int
  time_card_id     Int
  driver_id        Int
  vehicle_id       Int?
  client_name      String    @db.VarChar(255)
  client_phone     String?   @db.VarChar(20)
  client_email     String?   @db.VarChar(255)
  pickup_time      DateTime? @db.Timestamptz(6)
  pickup_location  String?
  pickup_lat       Decimal?  @db.Decimal(10, 8)
  pickup_lng       Decimal?  @db.Decimal(11, 8)
  dropoff_time     DateTime? @db.Timestamptz(6)
  dropoff_location String?
  dropoff_lat      Decimal?  @db.Decimal(10, 8)
  dropoff_lng      Decimal?  @db.Decimal(11, 8)
  hourly_rate      Decimal   @db.Decimal(10, 2)
  service_hours    Decimal?  @db.Decimal(10, 2)
  total_cost       Decimal?  @db.Decimal(10, 2)
  service_type     String?   @default("transport") @db.VarChar(50)
  passenger_count  Int?      @default(1)
  notes            String?
  special_requests String?
  status           String?   @default("assigned") @db.VarChar(20)
  created_at       DateTime? @default(now()) @db.Timestamptz(6)
  updated_at       DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model commission_ledger {
  id                String    @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  booking_id        Int?
  line_item_id      String?   @db.Uuid
  from_entity_id    String    @db.Uuid
  to_entity_id      String    @db.Uuid
  gross_amount      Decimal   @db.Decimal(10, 2)
  commission_rate   Decimal   @db.Decimal(5, 4)
  commission_amount Decimal   @db.Decimal(10, 2)
  status            String?   @default("pending") @db.VarChar(20)
  paid_at           DateTime? @db.Timestamptz(6)
  payment_reference String?   @db.VarChar(255)
  payment_method    String?   @db.VarChar(50)
  period_start      DateTime? @db.Date
  period_end        DateTime? @db.Date
  notes             String?
  metadata          Json?     @default("{}")
  created_at        DateTime? @default(now()) @db.Timestamptz(6)
  updated_at        DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model commission_rates {
  id                 String    @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  booking_source_id  String?   @db.Uuid
  service_type_id    String?   @db.Uuid
  provider_entity_id String?   @db.Uuid
  referrer_entity_id String?   @db.Uuid
  commission_rate    Decimal   @db.Decimal(5, 4)
  commission_type    String?   @default("percentage") @db.VarChar(20)
  flat_amount        Decimal?  @db.Decimal(10, 2)
  effective_from     DateTime? @default(dbgenerated("CURRENT_DATE")) @db.Date
  effective_to       DateTime? @db.Date
  priority           Int?      @default(0)
  is_active          Boolean?  @default(true)
  notes              String?
  created_at         DateTime? @default(now()) @db.Timestamptz(6)
  updated_at         DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model company_info {
  id                         Int
  company_name               String?  @default("Walla Walla Travel")
  usdot_number               String?  @default("3603851") @db.VarChar(20)
  operating_authority_number String?
  base_name                  String?  @default("Walla Walla Travel Office")
  base_address               String?
  base_city                  String?  @default("Walla Walla")
  base_state                 String?  @default("WA") @db.VarChar(2)
  base_zip                   String?  @db.VarChar(10)
  base_lat                   Decimal? @db.Decimal(10, 8)
  base_lng                   Decimal? @db.Decimal(11, 8)
  weekly_limit_type          String?  @default("60") @db.VarChar(10)
  operates_7_days            Boolean? @default(false)
  created_at                 DateTime @default(now()) @db.Timestamp(6)
  updated_at                 DateTime @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model compliance_violations {
  id                    Int
  entity_type           String    @db.VarChar(20)
  entity_id             Int
  violation_type        String    @db.VarChar(50)
  violation_code        String?   @db.VarChar(20)
  severity              String?   @default("minor") @db.VarChar(20)
  description           String?
  detected_date         DateTime  @default(now()) @db.Timestamptz(6)
  detected_by           Int?
  detection_method      String?   @db.VarChar(50)
  resolved_date         DateTime? @db.Timestamptz(6)
  resolved_by           Int?
  resolution_notes      String?
  dot_inspection_number String?   @db.VarChar(50)
  out_of_service        Boolean?  @default(false)
  document_urls         String[]
  created_at            DateTime? @default(now()) @db.Timestamptz(6)
  updated_at            DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

model corporate_requests {
  id                 Int           @id @default(autoincrement())
  company_name       String        @db.VarChar(255)
  contact_name       String        @db.VarChar(255)
  contact_email      String        @db.VarChar(255)
  contact_phone      String?       @db.VarChar(50)
  event_type         String?       @db.VarChar(100)
  expected_attendees Int?
  preferred_date     DateTime?     @db.Date
  alternate_dates    String?
  budget_range       String?       @db.VarChar(100)
  requirements       String?
  special_requests   String?
  status             String?       @default("new") @db.VarChar(50)
  assigned_to        Int?
  crm_contact_id     Int?
  crm_deal_id        Int?
  created_at         DateTime?     @default(now()) @db.Timestamptz(6)
  updated_at         DateTime?     @default(now()) @db.Timestamptz(6)
  users              users?        @relation(fields: [assigned_to], references: [id], onUpdate: NoAction)
  crm_contacts       crm_contacts? @relation(fields: [crm_contact_id], references: [id], onUpdate: NoAction)
  crm_deals          crm_deals?    @relation(fields: [crm_deal_id], references: [id], onUpdate: NoAction)

  @@index([contact_email], map: "idx_corporate_requests_email")
  @@index([status], map: "idx_corporate_requests_status")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model customer_preferences {
  id                   Int
  customer_email       String    @db.VarChar(255)
  favorite_wine_types  String[]
  favorite_wineries    Int[]
  dietary_restrictions String?
  accessibility_needs  String?
  total_tours          Int?      @default(0)
  last_tour_date       DateTime? @db.Date
  average_group_size   Int?
  vip_status           Boolean?  @default(false)
  internal_notes       String?
  created_at           DateTime? @default(now()) @db.Timestamp(6)
  updated_at           DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model customer_tasting_notes {
  id                Int
  customer_id       Int
  winery_id         Int
  booking_id        Int?
  wine_name         String   @db.VarChar(255)
  wine_varietal     String?  @db.VarChar(100)
  wine_vintage      Int?
  appearance_notes  String?
  aroma_notes       String?
  taste_notes       String?
  finish_notes      String?
  overall_rating    Int?
  purchased         Boolean? @default(false)
  purchase_quantity Int?
  want_to_buy_later Boolean? @default(false)
  photos            Json?
  created_at        DateTime @default(now()) @db.Timestamp(6)
  updated_at        DateTime @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains an index with non-default null sort order and requires additional setup for migrations. Visit https://pris.ly/d/default-index-null-ordering for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model customers {
  id                      Int              @id @default(autoincrement())
  email                   String           @db.VarChar(255)
  name                    String           @db.VarChar(255)
  phone                   String?          @db.VarChar(20)
  preferred_wineries      String[]
  dietary_restrictions    String?
  accessibility_needs     String?
  vip_status              Boolean?         @default(false)
  email_marketing_consent Boolean?         @default(false)
  sms_marketing_consent   Boolean?         @default(false)
  total_bookings          Int?             @default(0)
  total_spent             Decimal?         @default(0) @db.Decimal(10, 2)
  average_rating          Decimal?         @db.Decimal(2, 1)
  last_booking_date       DateTime?        @db.Date
  created_at              DateTime         @default(now()) @db.Timestamp(6)
  updated_at              DateTime         @default(now()) @db.Timestamp(6)
  stripe_customer_id      String?          @db.VarChar(100)
  discovery_brand_id      Int?
  crm_contacts            crm_contacts[]
  trip_proposals          trip_proposals[]

  @@index([email], map: "idx_customers_email")
  @@index([last_booking_date(sort: Desc)], map: "idx_customers_last_booking")
  @@index([phone], map: "idx_customers_phone")
  @@index([vip_status], map: "idx_customers_vip")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model daily_trips {
  id                  Int
  time_card_id        Int
  driver_id           Int
  vehicle_id          Int
  date                DateTime @db.Date
  base_location_name  String?  @default("Walla Walla Travel Office")
  base_location_lat   Decimal  @db.Decimal(10, 8)
  base_location_lng   Decimal  @db.Decimal(11, 8)
  furthest_point_name String?
  furthest_point_lat  Decimal? @db.Decimal(10, 8)
  furthest_point_lng  Decimal? @db.Decimal(11, 8)
  max_air_miles       Decimal? @db.Decimal(10, 2)
  exceeded_150_miles  Boolean? @default(false)
  route_points        Json?
  start_odometer      Int?
  end_odometer        Int?
  total_miles         Int?
  created_at          DateTime @default(now()) @db.Timestamp(6)
  updated_at          DateTime @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model driver_documents {
  id                 Int       @id @default(autoincrement())
  driver_id          Int
  document_type      String    @db.VarChar(50)
  document_subtype   String?   @db.VarChar(50)
  document_name      String    @db.VarChar(255)
  document_url       String?   @db.VarChar(500)
  document_number    String?   @db.VarChar(100)
  file_size_bytes    Int?
  file_type          String?   @db.VarChar(50)
  issue_date         DateTime? @db.Date
  expiry_date        DateTime? @db.Date
  effective_date     DateTime? @db.Date
  verified           Boolean?  @default(false)
  verified_by        Int?
  verified_at        DateTime? @db.Timestamptz(6)
  verification_notes String?
  source             String?   @db.VarChar(50)
  original_filename  String?   @db.VarChar(255)
  notes              String?
  created_by         Int?
  created_at         DateTime? @default(now()) @db.Timestamptz(6)
  updated_at         DateTime? @default(now()) @db.Timestamptz(6)
  is_active          Boolean?  @default(true)
  archived_at        DateTime? @db.Timestamptz(6)
  archived_by        Int?
  archive_reason     String?

  @@index([driver_id], map: "idx_driver_docs_driver")
  @@index([document_type], map: "idx_driver_docs_type")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model email_capture_attempts {
  id                    Int
  visitor_id            Int
  trigger_type          String    @db.VarChar(100)
  query_count_at_prompt Int?
  prompted_at           DateTime  @default(now()) @db.Timestamptz(6)
  captured              Boolean?  @default(false)
  email                 String?   @db.VarChar(255)
  captured_at           DateTime? @db.Timestamptz(6)
  created_at            DateTime  @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model error_logs {
  id               Int       @default(autoincrement())
  error_id         String?   @default(dbgenerated("(gen_random_uuid())::text")) @db.VarChar(50)
  error_type       String    @db.VarChar(100)
  error_message    String
  error_stack      String?
  severity         String?   @default("error") @db.VarChar(20)
  user_id          Int?
  request_path     String?   @db.VarChar(500)
  request_method   String?   @db.VarChar(10)
  request_body     Json?
  request_headers  Json?
  environment      String?   @default("production") @db.VarChar(20)
  service_name     String?   @db.VarChar(100)
  hostname         String?   @db.VarChar(255)
  metadata         Json?     @default("{}")
  resolved_at      DateTime? @db.Timestamptz(6)
  resolved_by      Int?
  resolution_notes String?
  created_at       DateTime? @default(now()) @db.Timestamptz(6)
  stack_trace      String?
  user_agent       String?
  ip_address       String?
  visitor_id       String?
  session_id       String?

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model events {
  id              Int
  source          String                 @default("manual") @db.VarChar(50)
  source_url      String?                @db.VarChar(500)
  source_id       String?                @db.VarChar(100)
  title           String                 @db.VarChar(500)
  slug            String?                @db.VarChar(200)
  description     String?
  category        String?                @db.VarChar(100)
  tags            String[]
  start_date      DateTime               @db.Date
  end_date        DateTime?              @db.Date
  start_time      DateTime?              @db.Time(6)
  end_time        DateTime?              @db.Time(6)
  is_all_day      Boolean?               @default(false)
  recurrence_rule String?                @db.VarChar(255)
  venue_name      String?                @db.VarChar(255)
  address         String?                @db.VarChar(500)
  latitude        Decimal?               @db.Decimal(10, 8)
  longitude       Decimal?               @db.Decimal(11, 8)
  is_virtual      Boolean?               @default(false)
  virtual_url     String?                @db.VarChar(500)
  winery_id       Int?
  business_id     Int?
  price_info      String?                @db.VarChar(255)
  ticket_url      String?                @db.VarChar(500)
  image_url       String?                @db.VarChar(500)
  is_verified     Boolean?               @default(false)
  is_featured     Boolean?               @default(false)
  is_active       Boolean?               @default(true)
  embedding       Unsupported("vector")?
  created_at      DateTime?              @default(now()) @db.Timestamptz(6)
  updated_at      DateTime?              @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model financial_audit_log {
  id                String    @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  action_type       String    @db.VarChar(50)
  correlation_id    String?   @db.VarChar(100)
  entity_type       String?   @db.VarChar(50)
  entity_id         String?   @db.VarChar(100)
  user_id           Int?
  service_entity_id String?   @db.Uuid
  amount            Decimal?  @db.Decimal(10, 2)
  currency          String?   @default("USD") @db.VarChar(3)
  previous_state    Json?
  new_state         Json?
  ip_address        String?   @db.Inet
  user_agent        String?
  request_path      String?   @db.VarChar(500)
  success           Boolean?
  error_message     String?
  metadata          Json?     @default("{}")
  created_at        DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model hotels {
  id                  Int                   @id
  name                String                @db.VarChar(255)
  slug                String                @db.VarChar(255)
  address             String                @db.VarChar(500)
  city                String?               @default("Walla Walla") @db.VarChar(100)
  state               String?               @default("WA") @db.VarChar(2)
  zip_code            String?               @db.VarChar(10)
  latitude            Decimal?              @db.Decimal(10, 8)
  longitude           Decimal?              @db.Decimal(11, 8)
  phone               String?               @db.VarChar(20)
  website             String?               @db.VarChar(500)
  type                String?               @db.VarChar(50)
  description         String?
  amenities           String[]
  is_active           Boolean?              @default(true)
  display_order       Int?                  @default(0)
  created_at          DateTime?             @default(now()) @db.Timestamp(6)
  updated_at          DateTime?             @default(now()) @db.Timestamp(6)
  trip_proposal_stops trip_proposal_stops[]
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model incident_fee_schedule {
  id            String    @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  incident_type String    @db.VarChar(50)
  severity      String?   @db.VarChar(20)
  description   String
  base_fee      Decimal   @db.Decimal(10, 2)
  is_negotiable Boolean?  @default(false)
  max_fee       Decimal?  @db.Decimal(10, 2)
  policy_text   String?
  is_active     Boolean?  @default(true)
  created_at    DateTime? @default(now()) @db.Timestamptz(6)
  updated_at    DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model inspections {
  id                                                             Int            @id @default(autoincrement())
  driver_id                                                      Int
  vehicle_id                                                     Int
  type                                                           String         @db.VarChar(20)
  inspection_data                                                Json?
  start_mileage                                                  Int?
  end_mileage                                                    Int?
  status                                                         String?        @default("pending") @db.VarChar(20)
  issues_found                                                   Boolean?       @default(false)
  issues_description                                             String?
  vehicle_capacity                                               Int?
  passenger_area_check                                           Boolean?       @default(true)
  emergency_equipment_check                                      Boolean?       @default(true)
  fire_extinguisher_check                                        Boolean?       @default(true)
  first_aid_kit_check                                            Boolean?       @default(true)
  emergency_reflectors_check                                     Boolean?       @default(true)
  created_at                                                     DateTime       @default(now()) @db.Timestamptz(6)
  updated_at                                                     DateTime       @default(now()) @db.Timestamptz(6)
  time_card_id                                                   Int?
  defects_found                                                  Boolean?       @default(false)
  defect_severity                                                String?        @db.VarChar(20)
  defect_description                                             String?
  is_historical_entry                                            Boolean?       @default(false)
  historical_source                                              String?        @db.VarChar(100)
  entered_by                                                     Int?
  entry_date                                                     DateTime?      @default(now()) @db.Timestamptz(6)
  entry_notes                                                    String?
  original_document_date                                         DateTime?      @db.Date
  dvir_reports_dvir_reports_post_trip_inspection_idToinspections dvir_reports[] @relation("dvir_reports_post_trip_inspection_idToinspections")
  dvir_reports_dvir_reports_pre_trip_inspection_idToinspections  dvir_reports[] @relation("dvir_reports_pre_trip_inspection_idToinspections")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model interview_questions {
  id                        Int
  business_type             String    @db.VarChar(50)
  question_number           Int
  question_text             String
  help_text                 String?
  expected_duration_seconds Int?      @default(60)
  required                  Boolean?  @default(true)
  category                  String?   @db.VarChar(50)
  ai_extraction_prompt      String?
  active                    Boolean?  @default(true)
  created_at                DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model invoices {
  id                Int
  booking_id        Int
  invoice_number    String    @db.VarChar(50)
  invoice_type      String    @db.VarChar(20)
  subtotal          Decimal   @db.Decimal(10, 2)
  tip_amount        Decimal?  @default(0) @db.Decimal(10, 2)
  tax_amount        Decimal?  @default(0) @db.Decimal(10, 2)
  total_amount      Decimal   @db.Decimal(10, 2)
  status            String?   @default("draft") @db.VarChar(20)
  payment_method    String?   @db.VarChar(50)
  payment_intent_id String?   @db.VarChar(255)
  sent_at           DateTime? @db.Timestamp(6)
  paid_at           DateTime? @db.Timestamp(6)
  due_date          DateTime? @db.Date
  pdf_url           String?
  notes             String?
  created_at        DateTime? @default(now()) @db.Timestamp(6)
  updated_at        DateTime? @default(now()) @db.Timestamp(6)

  @@index([booking_id], map: "idx_invoices_booking_id")
  @@index([invoice_number], map: "idx_invoices_invoice_number")
  @@index([status], map: "idx_invoices_status")
  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model itineraries {
  id                         Int
  booking_id                 Int?
  template_name              String?   @db.VarChar(255)
  is_template                Boolean?  @default(false)
  pickup_location            String?
  pickup_time                DateTime? @db.Time(6)
  dropoff_location           String?
  estimated_dropoff_time     DateTime? @db.Time(6)
  total_drive_time_minutes   Int?
  internal_notes             String?
  driver_notes               String?
  created_at                 DateTime? @default(now()) @db.Timestamp(6)
  updated_at                 DateTime? @default(now()) @db.Timestamp(6)
  pickup_drive_time_minutes  Int?      @default(0)
  dropoff_drive_time_minutes Int?      @default(0)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model itinerary_stops {
  id                         Int
  itinerary_id               Int?
  winery_id                  Int?
  stop_order                 Int
  arrival_time               DateTime? @db.Time(6)
  departure_time             DateTime? @db.Time(6)
  duration_minutes           Int?      @default(60)
  drive_time_to_next_minutes Int?
  stop_type                  String?   @default("winery") @db.VarChar(50)
  reservation_confirmed      Boolean?  @default(false)
  special_notes              String?
  created_at                 DateTime? @default(now()) @db.Timestamp(6)
  is_lunch_stop              Boolean?  @default(false)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model lodging_partners {
  id                        Int
  brand_id                  Int?
  partner_type              String    @default("referral") @db.VarChar(50)
  affiliate_code            String?   @db.VarChar(100)
  affiliate_platform        String?   @db.VarChar(50)
  referral_tracking_enabled Boolean?  @default(true)
  commission_rate           Decimal?  @db.Decimal(5, 2)
  property_count            Int?      @default(1)
  property_types            String[]
  created_at                DateTime? @default(now()) @db.Timestamptz(6)
  updated_at                DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model lunch_orders {
  id                       Int
  booking_id               Int
  restaurant_id            Int
  customer_id              Int
  order_items              Json
  subtotal                 Decimal   @db.Decimal(10, 2)
  tax                      Decimal   @db.Decimal(10, 2)
  tip                      Decimal?  @default(0) @db.Decimal(10, 2)
  total                    Decimal   @db.Decimal(10, 2)
  estimated_arrival_time   DateTime  @db.Time(6)
  requested_ready_time     DateTime  @db.Time(6)
  dietary_restrictions     String?
  allergies                String?
  special_instructions     String?
  payment_status           String?   @default("pending") @db.VarChar(50)
  paid_at                  DateTime? @db.Timestamp(6)
  stripe_payment_intent_id String?   @db.VarChar(100)
  restaurant_notified      Boolean?  @default(false)
  restaurant_notified_at   DateTime? @db.Timestamp(6)
  restaurant_confirmed     Boolean?  @default(false)
  restaurant_confirmed_at  DateTime? @db.Timestamp(6)
  ready_for_pickup         Boolean?  @default(false)
  status                   String    @default("pending") @db.VarChar(50)
  created_at               DateTime  @default(now()) @db.Timestamp(6)
  updated_at               DateTime  @default(now()) @db.Timestamp(6)
  approved_by              Int?
  approved_at              DateTime? @db.Timestamp(6)
  email_sent_at            DateTime? @db.Timestamp(6)
  email_body               String?
  commission_amount        Decimal?  @db.Decimal(10, 2)
  notes                    String?

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model media_library {
  id                               Int        @id @default(autoincrement())
  file_name                        String     @db.VarChar(255)
  file_path                        String     @db.VarChar(500)
  file_type                        String     @db.VarChar(50)
  file_size                        Int?
  mime_type                        String?    @db.VarChar(100)
  category                         String     @db.VarChar(100)
  subcategory                      String?    @db.VarChar(100)
  title                            String?    @db.VarChar(255)
  description                      String?
  alt_text                         String?    @db.VarChar(255)
  photographer                     String?    @db.VarChar(255)
  copyright_info                   String?    @db.VarChar(255)
  tags                             String[]   @default([])
  is_hero                          Boolean?   @default(false)
  display_order                    Int?       @default(0)
  is_active                        Boolean?   @default(true)
  view_count                       Int?       @default(0)
  seo_keywords                     String[]   @default([])
  thumbnail_path                   String?    @db.VarChar(500)
  medium_path                      String?    @db.VarChar(500)
  large_path                       String?    @db.VarChar(500)
  webp_path                        String?    @db.VarChar(500)
  video_duration                   Int?
  video_thumbnail_path             String?    @db.VarChar(500)
  created_at                       DateTime?  @default(now()) @db.Timestamp(6)
  updated_at                       DateTime?  @default(now()) @db.Timestamp(6)
  wineries_featured_photo_override wineries[] @relation("winery_featured_photo_override")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model media_usage_log {
  id        Int
  media_id  Int
  used_in   String    @db.VarChar(100)
  entity_id Int?
  viewed_at DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model monthly_exemption_status {
  id                      Int
  driver_id               Int
  month_start_date        DateTime @db.Date
  days_exceeded_150_miles Int?     @default(0)
  requires_eld            Boolean? @default(false)
  alert_sent_at_7_days    Boolean? @default(false)
  alert_sent_at_8_days    Boolean? @default(false)
  created_at              DateTime @default(now()) @db.Timestamp(6)
  updated_at              DateTime @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model partner_activity_log {
  id                 Int      @default(autoincrement())
  partner_profile_id Int
  action             String   @db.VarChar(100)
  details            Json?
  ip_address         String?  @db.VarChar(45)
  created_at         DateTime @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model partner_profiles {
  id                     Int       @id @default(autoincrement())
  user_id                Int
  business_name          String    @db.VarChar(255)
  business_type          String    @default("winery") @db.VarChar(50)
  winery_id              Int?
  hotel_id               Int?
  restaurant_id          Int?
  status                 String    @default("active") @db.VarChar(50)
  invited_by             Int?
  invited_at             DateTime? @db.Timestamp(6)
  setup_completed_at     DateTime? @db.Timestamp(6)
  setup_token            String?   @db.VarChar(255)
  setup_token_expires_at DateTime? @db.Timestamp(6)
  notes                  String?
  created_at             DateTime  @default(now()) @db.Timestamp(6)
  updated_at             DateTime  @default(now()) @db.Timestamp(6)

  @@index([user_id], map: "idx_partner_profiles_user_id")
  @@index([winery_id], map: "idx_partner_profiles_winery_id")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model payment_intents {
  id                       Int
  stripe_payment_intent_id String    @db.VarChar(255)
  booking_id               Int?
  amount                   Decimal   @db.Decimal(10, 2)
  currency                 String?   @default("usd") @db.VarChar(3)
  status                   String    @db.VarChar(50)
  customer_email           String?   @db.VarChar(255)
  metadata                 Json?
  created_at               DateTime? @default(now()) @db.Timestamp(6)
  updated_at               DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model payments {
  id                                                         Int              @id
  booking_id                                                 Int?
  customer_id                                                Int?
  amount                                                     Decimal          @db.Decimal(10, 2)
  currency                                                   String?          @default("USD") @db.VarChar(3)
  payment_type                                               String           @db.VarChar(50)
  payment_method                                             String           @db.VarChar(50)
  stripe_payment_intent_id                                   String?          @db.VarChar(100)
  stripe_charge_id                                           String?          @db.VarChar(100)
  stripe_refund_id                                           String?          @db.VarChar(100)
  card_brand                                                 String?          @db.VarChar(20)
  card_last4                                                 String?          @db.VarChar(4)
  status                                                     String           @default("pending") @db.VarChar(50)
  failure_reason                                             String?
  created_at                                                 DateTime         @default(now()) @db.Timestamp(6)
  updated_at                                                 DateTime         @default(now()) @db.Timestamp(6)
  succeeded_at                                               DateTime?        @db.Timestamp(6)
  failed_at                                                  DateTime?        @db.Timestamp(6)
  refunded_at                                                DateTime?        @db.Timestamp(6)
  reservation_id                                             Int?
  brand_id                                                   Int?
  trip_proposals_trip_proposals_balance_payment_idTopayments trip_proposals[] @relation("trip_proposals_balance_payment_idTopayments")
  trip_proposals_trip_proposals_deposit_payment_idTopayments trip_proposals[] @relation("trip_proposals_deposit_payment_idTopayments")

  @@index([booking_id], map: "idx_payments_booking")
  @@index([booking_id, status], map: "idx_payments_booking_status")
  @@index([created_at(sort: Desc), status], map: "idx_payments_created_status")
  @@index([reservation_id], map: "idx_payments_reservation")
  @@index([status], map: "idx_payments_status")
  @@index([stripe_payment_intent_id], map: "idx_payments_stripe_intent")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model performance_metrics {
  id           Int
  metric_name  String    @db.VarChar(100)
  metric_value Decimal   @db.Decimal(15, 4)
  metric_unit  String?   @db.VarChar(20)
  endpoint     String?   @db.VarChar(255)
  method       String?   @db.VarChar(10)
  status_code  Int?
  user_id      Int?
  session_id   String?   @db.VarChar(100)
  tags         Json?     @default("{}")
  recorded_at  DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model pricing_cache {
  id                Int
  cache_key         String    @db.VarChar(255)
  service_type      String    @db.VarChar(50)
  party_size        Int
  service_date      DateTime  @db.Date
  duration_hours    Decimal?  @db.Decimal(5, 2)
  miles             Decimal?  @db.Decimal(8, 2)
  base_rate         Decimal   @db.Decimal(10, 2)
  applied_modifiers Json?
  final_price       Decimal   @db.Decimal(10, 2)
  breakdown         Json?
  calculated_at     DateTime? @default(now()) @db.Timestamptz(6)
  expires_at        DateTime  @db.Timestamptz(6)
  hit_count         Int?      @default(0)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model pricing_history {
  id              Int
  table_name      String    @db.VarChar(50)
  record_id       Int
  action          String    @db.VarChar(20)
  old_values      Json?
  new_values      Json?
  change_summary  String?
  changed_by      Int?
  changed_by_name String?   @db.VarChar(255)
  changed_at      DateTime? @default(now()) @db.Timestamptz(6)
  change_reason   String?

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model pricing_modifiers {
  id                       Int
  name                     String    @db.VarChar(100)
  description              String?
  modifier_type            String    @db.VarChar(50)
  value_type               String    @db.VarChar(20)
  value                    Decimal   @db.Decimal(10, 2)
  applies_to_service_types String[]
  applies_to_tier_ids      Int[]
  min_party_size           Int?
  max_party_size           Int?
  min_advance_days         Int?
  min_booking_amount       Decimal?  @db.Decimal(10, 2)
  effective_start_date     DateTime? @db.Date
  effective_end_date       DateTime? @db.Date
  applies_monday           Boolean?  @default(true)
  applies_tuesday          Boolean?  @default(true)
  applies_wednesday        Boolean?  @default(true)
  applies_thursday         Boolean?  @default(true)
  applies_friday           Boolean?  @default(true)
  applies_saturday         Boolean?  @default(true)
  applies_sunday           Boolean?  @default(true)
  active                   Boolean?  @default(true)
  priority                 Int?      @default(0)
  is_stackable             Boolean?  @default(true)
  created_at               DateTime? @default(now()) @db.Timestamptz(6)
  updated_at               DateTime? @default(now()) @db.Timestamptz(6)
  created_by               Int?
  notes                    String?

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model pricing_rules {
  id                 Int
  name               String    @db.VarChar(255)
  description        String?
  vehicle_type       String?   @db.VarChar(50)
  duration_hours     Decimal?  @db.Decimal(3, 1)
  day_of_week        Int?
  is_weekend         Boolean?
  is_holiday         Boolean?
  season             String?   @db.VarChar(20)
  base_price         Decimal   @db.Decimal(10, 2)
  price_per_hour     Decimal?  @db.Decimal(10, 2)
  price_per_person   Decimal?  @db.Decimal(10, 2)
  minimum_price      Decimal?  @db.Decimal(10, 2)
  maximum_price      Decimal?  @db.Decimal(10, 2)
  weekend_multiplier Decimal?  @default(1.0) @db.Decimal(4, 2)
  holiday_multiplier Decimal?  @default(1.0) @db.Decimal(4, 2)
  priority           Int?      @default(0)
  is_active          Boolean?  @default(true)
  valid_from         DateTime? @db.Date
  valid_until        DateTime? @db.Date
  created_at         DateTime  @default(now()) @db.Timestamp(6)
  updated_at         DateTime  @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model pricing_tiers {
  id                   Int
  service_type         String    @db.VarChar(50)
  tier_name            String    @db.VarChar(100)
  description          String?
  party_size_min       Int       @default(1)
  party_size_max       Int       @default(14)
  day_type             String?   @db.VarChar(20)
  season               String?   @default("standard") @db.VarChar(20)
  pricing_model        String    @db.VarChar(20)
  base_rate            Decimal?  @db.Decimal(10, 2)
  hourly_rate          Decimal?  @db.Decimal(10, 2)
  per_person_rate      Decimal?  @db.Decimal(10, 2)
  per_mile_rate        Decimal?  @db.Decimal(10, 2)
  minimum_charge       Decimal?  @db.Decimal(10, 2)
  effective_start_date DateTime? @db.Date
  effective_end_date   DateTime? @db.Date
  active               Boolean?  @default(true)
  priority             Int?      @default(0)
  created_at           DateTime? @default(now()) @db.Timestamptz(6)
  updated_at           DateTime? @default(now()) @db.Timestamptz(6)
  created_by           Int?
  notes                String?

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model processing_jobs {
  id            Int
  business_id   Int
  job_type      String    @db.VarChar(50)
  source_id     Int
  status        String?   @default("pending") @db.VarChar(50)
  result_data   Json?
  error_message String?
  created_at    DateTime? @default(now()) @db.Timestamp(6)
  started_at    DateTime? @db.Timestamp(6)
  completed_at  DateTime? @db.Timestamp(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model proposal_activity_log {
  id            Int
  proposal_id   Int?
  activity_type String    @db.VarChar(100)
  description   String?
  metadata      Json?
  created_at    DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model proposal_media {
  id            Int
  proposal_id   Int?
  media_id      Int?
  display_order Int?      @default(0)
  is_featured   Boolean?  @default(false)
  created_at    DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model proposal_text_templates {
  id                    Int
  template_name         String    @db.VarChar(255)
  title                 String?
  introduction          String?
  wine_tour_description String?
  transfer_description  String?
  wait_time_description String?
  terms_and_conditions  String?
  cancellation_policy   String?
  footer_notes          String?
  is_default            Boolean?  @default(false)
  created_at            DateTime? @default(now()) @db.Timestamptz(6)
  updated_at            DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model proposal_versions {
  id              Int
  proposal_id     Int?
  version_number  Int
  changed_by      String?   @db.VarChar(255)
  changed_at      DateTime? @default(now()) @db.Timestamptz(6)
  changes_summary String?
  snapshot        Json?

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model proposals {
  id                            Int         @id
  client_name                   String      @db.VarChar(255)
  client_email                  String      @db.VarChar(255)
  client_phone                  String?     @db.VarChar(50)
  client_company                String?     @db.VarChar(255)
  proposal_number               String      @db.VarChar(50)
  title                         String      @db.VarChar(500)
  status                        String?     @default("draft") @db.VarChar(50)
  service_items                 Json        @default("[]")
  subtotal                      Decimal     @default(0) @db.Decimal(10, 2)
  discount_percentage           Decimal?    @default(0) @db.Decimal(5, 2)
  discount_amount               Decimal?    @default(0) @db.Decimal(10, 2)
  gratuity_amount               Decimal?    @default(0) @db.Decimal(10, 2)
  gratuity_percentage           Decimal?    @default(0) @db.Decimal(5, 2)
  total                         Decimal     @default(0) @db.Decimal(10, 2)
  gratuity_enabled              Boolean?    @default(false)
  gratuity_suggested_percentage Decimal?    @default(20.00) @db.Decimal(5, 2)
  gratuity_optional             Boolean?    @default(true)
  notes                         String?
  terms_and_conditions          String?
  internal_notes                String?
  accepted_at                   DateTime?   @db.Timestamp(6)
  accepted_by                   String?     @db.VarChar(255)
  declined_at                   DateTime?   @db.Timestamp(6)
  declined_reason               String?
  converted_to_booking_id       Int?
  valid_until                   DateTime?   @db.Date
  created_by                    Int?
  created_at                    DateTime?   @default(now()) @db.Timestamp(6)
  updated_at                    DateTime?   @default(now()) @db.Timestamp(6)
  sent_at                       DateTime?   @db.Timestamp(6)
  viewed_at                     DateTime?   @db.Timestamp(6)
  view_count                    Int?        @default(0)
  modules                       Json?       @default("{}")
  corporate_details             Json?
  multi_day_itinerary           Json?
  b2b_details                   Json?
  special_event_details         Json?
  group_coordination            Json?
  accepted_by_name              String?     @db.VarChar(255)
  accepted_by_email             String?     @db.VarChar(255)
  accepted_by_phone             String?     @db.VarChar(50)
  final_total                   Decimal?    @db.Decimal(10, 2)
  signature                     String?
  signature_date                DateTime?   @db.Timestamp(6)
  include_gratuity_request      Boolean?    @default(true)
  suggested_gratuity_percentage Decimal?    @default(18.00) @db.Decimal(5, 2)
  client_gratuity_amount        Decimal?    @default(0) @db.Decimal(10, 2)
  client_gratuity_percentage    Decimal?    @db.Decimal(5, 2)
  acceptance_step               String?     @default("pending") @db.VarChar(50)
  proposal_title                String?
  introduction                  String?
  wine_tour_description         String?
  transfer_description          String?
  wait_time_description         String?
  special_notes                 String?
  cancellation_policy           String?
  footer_notes                  String?
  lunch_coordination            Boolean?    @default(false)
  lunch_coordination_count      Int?        @default(0)
  photography_package           Boolean?    @default(false)
  uuid                          String?     @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  additional_services           Json?       @default("[]")
  brand_id                      Int?
  brand_code                    String?     @db.VarChar(20)
  tenant_id                     Int?
  crm_deals                     crm_deals[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model rate_change_log {
  id            Int
  config_key    String    @db.VarChar(100)
  old_value     Json?
  new_value     Json
  changed_by    String?   @db.VarChar(255)
  change_reason String?
  changed_at    DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model rate_config {
  id              Int
  config_key      String    @db.VarChar(100)
  config_value    Json
  description     String?
  last_updated_by String?   @db.VarChar(255)
  updated_at      DateTime? @default(now()) @db.Timestamp(6)
  created_at      DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model referral_clicks {
  id               Int
  partner_type     String    @db.VarChar(50)
  partner_id       Int
  brand_id         Int?
  click_source     String?   @db.VarChar(100)
  utm_source       String?   @db.VarChar(100)
  utm_medium       String?   @db.VarChar(100)
  utm_campaign     String?   @db.VarChar(100)
  session_id       String?   @db.VarChar(100)
  ip_address       String?   @db.VarChar(45)
  user_agent       String?
  referrer_url     String?
  converted        Boolean?  @default(false)
  converted_at     DateTime? @db.Timestamptz(6)
  conversion_value Decimal?  @db.Decimal(10, 2)
  created_at       DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model refunds {
  id                       Int
  stripe_refund_id         String    @db.VarChar(255)
  stripe_payment_intent_id String    @db.VarChar(255)
  booking_id               Int?
  amount                   Decimal   @db.Decimal(10, 2)
  currency                 String?   @default("usd") @db.VarChar(3)
  reason                   String?   @db.VarChar(255)
  status                   String?   @default("pending") @db.VarChar(20)
  created_at               DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model reservations {
  id                     Int
  reservation_number     String    @db.VarChar(50)
  customer_id            Int?
  party_size             Int
  preferred_date         DateTime  @db.Date
  alternate_date         DateTime? @db.Date
  event_type             String?   @db.VarChar(100)
  special_requests       String?
  deposit_amount         Decimal   @db.Decimal(10, 2)
  deposit_paid           Boolean?  @default(false)
  payment_method         String?   @db.VarChar(20)
  status                 String?   @default("pending") @db.VarChar(50)
  consultation_deadline  DateTime? @db.Timestamp(6)
  contacted_at           DateTime? @db.Timestamp(6)
  confirmed_at           DateTime? @db.Timestamp(6)
  booking_id             Int?
  created_at             DateTime? @default(now()) @db.Timestamp(6)
  updated_at             DateTime? @default(now()) @db.Timestamp(6)
  brand_id               Int?
  brand_code             String?   @db.VarChar(20)
  specific_social_media  String?   @db.VarChar(50)
  specific_ai            String?   @db.VarChar(50)
  wine_tour_preference   String?   @db.VarChar(50)
  hotel_concierge_name   String?   @db.VarChar(255)
  referral_other_details String?
  tour_type              String?   @default("wine_tour") @db.VarChar(50)
  referral_source        String?   @db.VarChar(50)
  tour_duration_type     String?   @default("single") @db.VarChar(20)
  tour_start_date        DateTime? @db.Date
  tour_end_date          DateTime? @db.Date

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model restaurants {
  id                        Int                   @id
  name                      String                @db.VarChar(255)
  cuisine_type              String?               @db.VarChar(100)
  address                   String?               @db.VarChar(500)
  phone                     String?               @db.VarChar(20)
  email                     String?               @db.VarChar(255)
  website                   String?               @db.VarChar(500)
  menu_url                  String?               @db.VarChar(500)
  menu_data                 Json?
  accepts_pre_orders        Boolean?              @default(true)
  minimum_order_value       Decimal?              @db.Decimal(8, 2)
  is_partner                Boolean?              @default(false)
  commission_rate           Decimal?              @db.Decimal(4, 2)
  payment_terms             String?               @db.VarChar(100)
  contact_name              String?               @db.VarChar(255)
  contact_email             String?               @db.VarChar(255)
  api_enabled               Boolean?              @default(false)
  api_endpoint              String?               @db.VarChar(500)
  api_key_encrypted         String?               @db.VarChar(500)
  order_notification_method String?               @default("email") @db.VarChar(50)
  average_rating            Decimal?              @db.Decimal(2, 1)
  review_count              Int?                  @default(0)
  is_active                 Boolean?              @default(true)
  created_at                DateTime              @default(now()) @db.Timestamp(6)
  updated_at                DateTime              @default(now()) @db.Timestamp(6)
  price_range               String?               @db.VarChar(20)
  notes                     String?
  latitude                  Decimal?              @db.Decimal(10, 7)
  longitude                 Decimal?              @db.Decimal(10, 7)
  trip_proposal_stops       trip_proposal_stops[]
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model service_entities {
  id                        String    @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  code                      String    @db.VarChar(50)
  legal_name                String    @db.VarChar(255)
  display_name              String    @db.VarChar(255)
  dba_names                 String[]
  entity_type               String?   @default("llc") @db.VarChar(50)
  state_of_formation        String?   @db.VarChar(2)
  ein                       String?   @db.VarChar(20)
  usdot_number              String?   @db.VarChar(20)
  mc_number                 String?   @db.VarChar(20)
  is_motor_carrier          Boolean?  @default(false)
  insurance_provider        String?   @db.VarChar(255)
  insurance_policy_number   String?   @db.VarChar(100)
  insurance_expiration      DateTime? @db.Date
  insurance_coverage_amount Decimal?  @db.Decimal(15, 2)
  primary_email             String?   @db.VarChar(255)
  primary_phone             String?   @db.VarChar(50)
  address_line1             String?   @db.VarChar(255)
  address_line2             String?   @db.VarChar(255)
  city                      String?   @db.VarChar(100)
  state                     String?   @db.VarChar(2)
  zip                       String?   @db.VarChar(20)
  stripe_account_id         String?   @db.VarChar(255)
  stripe_account_type       String?   @db.VarChar(20)
  default_payment_processor String?   @default("stripe") @db.VarChar(50)
  default_commission_rate   Decimal?  @default(0.15) @db.Decimal(5, 4)
  commission_type           String?   @default("percentage") @db.VarChar(20)
  is_active                 Boolean?  @default(true)
  onboarded_at              DateTime? @db.Timestamptz(6)
  settings                  Json?     @default("{}")
  metadata                  Json?     @default("{}")
  created_at                DateTime? @default(now()) @db.Timestamptz(6)
  updated_at                DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model service_type_media {
  id            Int
  service_type  String    @db.VarChar(100)
  media_id      Int
  is_default    Boolean?  @default(false)
  display_order Int?      @default(0)
  created_at    DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model service_types {
  id                      String    @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  code                    String    @db.VarChar(50)
  name                    String    @db.VarChar(100)
  description             String?
  category                String?   @db.VarChar(50)
  default_provider_id     String?   @db.Uuid
  default_hourly_rate     Decimal?  @db.Decimal(10, 2)
  default_flat_rate       Decimal?  @db.Decimal(10, 2)
  pricing_model           String?   @default("hourly") @db.VarChar(20)
  default_commission_rate Decimal?  @db.Decimal(5, 4)
  is_active               Boolean?  @default(true)
  sort_order              Int?      @default(0)
  created_at              DateTime? @default(now()) @db.Timestamptz(6)
  updated_at              DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model shared_tours {
  id                  Int       @default(autoincrement())
  tour_code           String    @db.VarChar(20)
  title               String    @db.VarChar(255)
  description         String?
  tour_date           DateTime  @db.Date
  start_time          DateTime  @db.Time(6)
  end_time            DateTime? @db.Time(6)
  duration_hours      Decimal?  @default(6.0) @db.Decimal(4, 2)
  max_guests          Int       @default(14)
  min_guests          Int?      @default(2)
  current_guests      Int?      @default(0)
  price_per_person    Decimal   @db.Decimal(10, 2)
  deposit_per_person  Decimal?  @db.Decimal(10, 2)
  pickup_location     String?
  pickup_address      String?   @db.VarChar(500)
  pickup_notes        String?
  planned_wineries    String[]
  lunch_included      Boolean?  @default(false)
  lunch_venue         String?   @db.VarChar(255)
  status              String?   @default("scheduled") @db.VarChar(20)
  published           Boolean?  @default(false)
  driver_id           Int?
  vehicle_id          Int?
  notes               String?
  internal_notes      String?
  metadata            Json?     @default("{}")
  created_at          DateTime? @default(now()) @db.Timestamptz(6)
  updated_at          DateTime? @default(now()) @db.Timestamptz(6)
  created_by          Int?
  lunch_menu_options  Json?     @default("[]")
  discount_type       String?   @db.VarChar(20)
  discount_amount     Decimal?  @default(0) @db.Decimal(10, 2)
  discount_reason     String?
  discount_applied_at DateTime? @db.Timestamptz(6)
  discount_applied_by String?   @db.VarChar(255)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model shared_tours_availability {
  id                      Int       @default(autoincrement())
  start_date              DateTime  @db.Date
  end_date                DateTime? @db.Date
  day_of_week             Int?
  start_time              DateTime  @db.Time(6)
  duration_hours          Decimal?  @default(6.0) @db.Decimal(4, 2)
  max_guests              Int?      @default(14)
  price_per_person        Decimal   @db.Decimal(10, 2)
  default_pickup_location String?
  default_wineries        String[]
  is_active               Boolean?  @default(true)
  created_at              DateTime? @default(now()) @db.Timestamptz(6)
  updated_at              DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model shared_tours_tickets {
  id                        Int
  shared_tour_id            Int
  customer_id               Int?
  booking_id                Int?
  ticket_number             String          @db.VarChar(20)
  guest_count               Int             @default(1)
  primary_guest_name        String          @db.VarChar(255)
  primary_guest_email       String?         @db.VarChar(255)
  primary_guest_phone       String?         @db.VarChar(50)
  additional_guests         Json?           @default("[]")
  pickup_location           String?
  pickup_address            String?         @db.VarChar(500)
  pickup_notes              String?
  price_per_person          Decimal         @db.Decimal(10, 2)
  total_price               Decimal         @db.Decimal(10, 2)
  deposit_amount            Decimal?        @db.Decimal(10, 2)
  amount_paid               Decimal?        @default(0) @db.Decimal(10, 2)
  payment_status            String?         @default("pending") @db.VarChar(20)
  payment_intent_id         String?         @db.VarChar(255)
  status                    String?         @default("confirmed") @db.VarChar(20)
  checked_in_at             DateTime?       @db.Timestamptz(6)
  dietary_restrictions      String?
  special_requests          String?
  notes                     String?
  metadata                  Json?           @default("{}")
  created_at                DateTime?       @default(now()) @db.Timestamptz(6)
  updated_at                DateTime?       @default(now()) @db.Timestamptz(6)
  cancelled_at              DateTime?       @db.Timestamptz(6)
  cancellation_reason       String?
  lunch_selection           String?         @db.VarChar(100)
  guest_lunch_selections    Json?           @default("[]")
  referral_source           String?         @db.VarChar(100)
  promo_code                String?         @db.VarChar(50)
  tax_amount                Decimal?        @db.Decimal(10, 2)
  final_total               Decimal?        @db.Decimal(10, 2)
  lunch_included            Boolean?        @default(false)
  hotel_partner_id          Int?
  booked_by_hotel           Boolean?        @default(false)
  refund_amount             Decimal?        @default(0) @db.Decimal(10, 2)
  refund_id                 String?         @db.VarChar(255)
  refund_status             String?         @db.VarChar(50)
  refunded_at               DateTime?       @db.Timestamptz(6)
  original_price_per_person Decimal?        @db.Decimal(10, 2)
  original_total_amount     Decimal?        @db.Decimal(10, 2)
  hotel_partners            hotel_partners? @relation(fields: [hotel_partner_id], references: [id], onUpdate: NoAction)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model system_health_checks {
  id               Int
  check_type       String    @db.VarChar(50)
  check_name       String    @db.VarChar(100)
  status           String    @db.VarChar(20)
  response_time_ms Int?
  error_message    String?
  metadata         Json?     @default("{}")
  checked_at       DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model system_settings {
  setting_key   String    @db.VarChar(100)
  setting_value Json
  setting_type  String    @db.VarChar(50)
  description   String?
  updated_at    DateTime? @default(now()) @db.Timestamp(6)
  updated_by    Int?

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model tenants {
  id                Int
  slug              String    @db.VarChar(50)
  legal_name        String    @db.VarChar(255)
  display_name      String    @db.VarChar(255)
  email             String?   @db.VarChar(255)
  phone             String?   @db.VarChar(50)
  address_line1     String?   @db.VarChar(255)
  address_line2     String?   @db.VarChar(255)
  city              String?   @db.VarChar(100)
  state             String?   @db.VarChar(50)
  zip               String?   @db.VarChar(20)
  logo_url          String?   @db.VarChar(500)
  primary_color     String?   @default("#1E3A5F") @db.VarChar(7)
  secondary_color   String?   @default("#E07A5F") @db.VarChar(7)
  stripe_account_id String?   @db.VarChar(100)
  tax_id            String?   @db.VarChar(50)
  is_active         Boolean?  @default(true)
  is_platform_owner Boolean?  @default(false)
  created_at        DateTime? @default(now()) @db.Timestamptz(6)
  updated_at        DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model time_cards {
  id                      Int                  @id @default(autoincrement())
  driver_id               Int
  vehicle_id              Int?
  date                    DateTime             @default(dbgenerated("CURRENT_DATE")) @db.Date
  work_reporting_location String               @default("Walla Walla Travel Office")
  work_reporting_lat      Decimal?             @db.Decimal(10, 8)
  work_reporting_lng      Decimal?             @db.Decimal(11, 8)
  clock_in_time           DateTime             @db.Timestamptz(6)
  clock_out_time          DateTime?            @db.Timestamptz(6)
  driving_hours           Decimal?             @default(0) @db.Decimal(4, 2)
  on_duty_hours           Decimal?             @default(0) @db.Decimal(4, 2)
  status                  String?              @default("in_progress") @db.VarChar(20)
  notes                   String?
  driver_signature        String?
  signature_timestamp     DateTime?            @db.Timestamp(6)
  exceeds_driving_limit   Boolean?             @default(false)
  exceeds_on_duty_limit   Boolean?             @default(false)
  created_at              DateTime             @default(now()) @db.Timestamptz(6)
  updated_at              DateTime             @default(now()) @db.Timestamptz(6)
  client_service_id       Int?
  is_historical_entry     Boolean?             @default(false)
  historical_source       String?              @db.VarChar(100)
  entered_by              Int?
  entry_date              DateTime?            @default(now()) @db.Timestamptz(6)
  entry_notes             String?
  original_document_date  DateTime?            @db.Date
  break_records           break_records[]
  driver_status_logs      driver_status_logs[]

  @@index([driver_id, date(sort: Desc)], map: "idx_time_cards_driver_date")
  @@index([driver_id, date, clock_in_time], map: "idx_time_cards_driver_date_tz")
  @@index([status], map: "idx_time_cards_status")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model tour_offers {
  id             Int
  booking_id     Int
  driver_id      Int
  vehicle_id     Int?
  offered_by     Int?
  offered_at     DateTime? @default(now()) @db.Timestamp(6)
  expires_at     DateTime? @db.Timestamp(6)
  status         String?   @default("pending") @db.VarChar(20)
  response_at    DateTime? @db.Timestamp(6)
  response_notes String?
  notes          String?
  created_at     DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model tour_operator_insights {
  id              Int
  business_id     Int
  insight_type    String    @db.VarChar(50)
  content         String
  applies_to      String[]
  season          String[]
  priority        Int?      @default(5)
  show_in_ai      Boolean?  @default(true)
  show_in_profile Boolean?  @default(false)
  created_by      Int?
  created_at      DateTime? @default(now()) @db.Timestamp(6)
  updated_at      DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model tour_providers {
  id                   Int
  brand_id             Int?
  service_types        String[]
  max_passengers       Int?
  service_area         String[]
  vehicle_count        Int?      @default(0)
  base_hourly_rate     Decimal?  @db.Decimal(10, 2)
  minimum_hours        Int?      @default(4)
  advance_booking_days Int?      @default(1)
  max_booking_days     Int?      @default(365)
  cancellation_policy  String?
  deposit_percentage   Decimal?  @default(25.00) @db.Decimal(5, 2)
  created_at           DateTime? @default(now()) @db.Timestamptz(6)
  updated_at           DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model trip_distances {
  id                       Int
  time_card_id             Int
  booking_id               Int?
  driver_id                Int
  trip_date                DateTime  @db.Date
  start_lat                Decimal?  @db.Decimal(10, 8)
  start_lng                Decimal?  @db.Decimal(11, 8)
  start_location_name      String?   @db.VarChar(255)
  start_timestamp          DateTime? @db.Timestamptz(6)
  furthest_lat             Decimal?  @db.Decimal(10, 8)
  furthest_lng             Decimal?  @db.Decimal(11, 8)
  furthest_location_name   String?   @db.VarChar(255)
  furthest_timestamp       DateTime? @db.Timestamptz(6)
  end_lat                  Decimal?  @db.Decimal(10, 8)
  end_lng                  Decimal?  @db.Decimal(11, 8)
  end_location_name        String?   @db.VarChar(255)
  end_timestamp            DateTime? @db.Timestamptz(6)
  max_air_miles            Decimal?  @db.Decimal(6, 2)
  exceeds_150              Boolean?  @default(dbgenerated("(max_air_miles > (150)::numeric)"))
  returned_within_12_hours Boolean?
  paper_log_required       Boolean?  @default(dbgenerated("(max_air_miles > (150)::numeric)"))
  paper_log_completed      Boolean?  @default(false)
  paper_log_url            String?   @db.VarChar(500)
  tracking_method          String?   @default("gps") @db.VarChar(20)
  created_at               DateTime? @default(now()) @db.Timestamptz(6)
  updated_at               DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model user_activity_logs {
  id         Int
  user_id    Int
  action     String   @db.VarChar(100)
  details    Json?
  ip_address String?  @db.VarChar(45)
  created_at DateTime @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model users {
  id                                                                 Int                           @id @default(autoincrement())
  email                                                              String                        @db.VarChar(255)
  password_hash                                                      String                        @db.VarChar(255)
  name                                                               String                        @db.VarChar(255)
  role                                                               String                        @default("driver") @db.VarChar(50)
  is_active                                                          Boolean?                      @default(true)
  last_login                                                         DateTime?                     @db.Timestamp(6)
  created_at                                                         DateTime                      @default(now()) @db.Timestamp(6)
  updated_at                                                         DateTime                      @default(now()) @db.Timestamp(6)
  phone                                                              String?                       @db.VarChar(20)
  emergency_contact_name                                             String?                       @db.VarChar(255)
  emergency_contact_phone                                            String?                       @db.VarChar(20)
  emergency_contact_relationship                                     String?                       @db.VarChar(100)
  tenant_id                                                          Int?
  accessible_tenant_ids                                              Int[]
  medical_cert_number                                                String?                       @db.VarChar(50)
  medical_cert_expiry                                                DateTime?                     @db.Date
  medical_cert_url                                                   String?                       @db.VarChar(500)
  medical_cert_type                                                  String?                       @db.VarChar(50)
  license_number                                                     String?                       @db.VarChar(50)
  license_state                                                      String?                       @db.VarChar(2)
  license_expiry                                                     DateTime?                     @db.Date
  license_class                                                      String?                       @db.VarChar(10)
  cdl_endorsements                                                   String[]
  hired_date                                                         DateTime?                     @db.Date
  termination_date                                                   DateTime?                     @db.Date
  employment_status                                                  String?                       @default("active") @db.VarChar(20)
  mvr_check_date                                                     DateTime?                     @db.Date
  mvr_check_url                                                      String?                       @db.VarChar(500)
  background_check_date                                              DateTime?                     @db.Date
  background_check_url                                               String?                       @db.VarChar(500)
  road_test_date                                                     DateTime?                     @db.Date
  road_test_url                                                      String?                       @db.VarChar(500)
  annual_review_date                                                 DateTime?                     @db.Date
  dq_file_complete                                                   Boolean?                      @default(false)
  dq_file_notes                                                      String?
  dq_file_last_reviewed                                              DateTime?                     @db.Date
  dq_file_reviewed_by                                                Int?
  medical_examiner_name                                              String?                       @db.VarChar(100)
  medical_examiner_registry_number                                   String?                       @db.VarChar(50)
  cdl_restrictions                                                   String[]
  date_of_birth                                                      DateTime?                     @db.Date
  ssn_last_four                                                      String?                       @db.VarChar(4)
  employment_application_date                                        DateTime?                     @db.Date
  employment_verified_date                                           DateTime?                     @db.Date
  mvr_violations                                                     Int?                          @default(0)
  mvr_status                                                         String?                       @db.VarChar(20)
  road_test_examiner                                                 String?                       @db.VarChar(100)
  road_test_vehicle_type                                             String?                       @db.VarChar(50)
  road_test_passed                                                   Boolean?
  background_check_status                                            String?                       @db.VarChar(20)
  drug_test_date                                                     DateTime?                     @db.Date
  drug_test_status                                                   String?                       @db.VarChar(20)
  next_annual_review_date                                            DateTime?                     @db.Date
  dq_file_last_audit                                                 DateTime?                     @db.Date
  is_contributor                                                     Boolean?                      @default(false)
  kb_business_id                                                     Int?
  reset_token                                                        String?                       @db.VarChar(255)
  reset_token_expires_at                                             DateTime?                     @db.Timestamptz(6)
  blog_drafts_blog_drafts_created_byTousers                          blog_drafts[]                 @relation("blog_drafts_created_byTousers")
  blog_drafts_blog_drafts_reviewed_byTousers                         blog_drafts[]                 @relation("blog_drafts_reviewed_byTousers")
  break_records                                                      break_records[]
  business_import_batches                                            business_import_batches[]
  competitive_advantages                                             competitive_advantages[]
  competitor_changes                                                 competitor_changes[]
  competitor_swot                                                    competitor_swot[]
  competitors                                                        competitors[]
  content_approvals                                                  content_approvals[]
  content_collections                                                content_collections[]
  content_history                                                    content_history[]
  content_refresh_suggestions                                        content_refresh_suggestions[]
  content_suggestions                                                content_suggestions[]
  corporate_requests                                                 corporate_requests[]
  crm_activities                                                     crm_activities[]
  crm_contacts                                                       crm_contacts[]
  crm_deals                                                          crm_deals[]
  crm_tasks_crm_tasks_assigned_toTousers                             crm_tasks[]                   @relation("crm_tasks_assigned_toTousers")
  crm_tasks_crm_tasks_completed_byTousers                            crm_tasks[]                   @relation("crm_tasks_completed_byTousers")
  crm_tasks_crm_tasks_created_byTousers                              crm_tasks[]                   @relation("crm_tasks_created_byTousers")
  driver_status_logs                                                 driver_status_logs[]
  driver_tips                                                        driver_tips[]
  dvir_reports_dvir_reports_driver_idTousers                         dvir_reports[]                @relation("dvir_reports_driver_idTousers")
  dvir_reports_dvir_reports_mechanic_idTousers                       dvir_reports[]                @relation("dvir_reports_mechanic_idTousers")
  kb_contributions_kb_contributions_contributor_idTousers            kb_contributions[]            @relation("kb_contributions_contributor_idTousers")
  kb_contributions_kb_contributions_reviewed_byTousers               kb_contributions[]            @relation("kb_contributions_reviewed_byTousers")
  kb_draft_bookings                                                  kb_draft_bookings[]
  kb_pricing_config                                                  kb_pricing_config[]
  kb_review_history                                                  kb_review_history[]
  kb_trusted_contributors_kb_trusted_contributors_promoted_byTousers kb_trusted_contributors[]     @relation("kb_trusted_contributors_promoted_byTousers")
  kb_trusted_contributors_kb_trusted_contributors_user_idTousers     kb_trusted_contributors?      @relation("kb_trusted_contributors_user_idTousers")
  marketing_campaigns                                                marketing_campaigns[]
  mileage_logs                                                       mileage_logs[]
  page_content                                                       page_content[]
  scheduled_posts                                                    scheduled_posts[]
  social_accounts                                                    social_accounts[]
  tour_completions                                                   tour_completions[]
  tour_expenses                                                      tour_expenses[]
  trip_proposal_activity                                             trip_proposal_activity[]
  trip_proposals                                                     trip_proposals[]
  kb_businesses                                                      kb_businesses?                @relation(fields: [kb_business_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  vehicle_alerts_vehicle_alerts_created_byTousers                    vehicle_alerts[]              @relation("vehicle_alerts_created_byTousers")
  vehicle_alerts_vehicle_alerts_resolved_byTousers                   vehicle_alerts[]              @relation("vehicle_alerts_resolved_byTousers")

  @@index([email], map: "idx_users_email")
  @@index([role], map: "idx_users_role")
  @@index([tenant_id], map: "idx_users_tenant")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model vehicle_assignments {
  id                Int
  time_card_id      Int
  driver_id         Int
  vehicle_id        Int
  client_service_id Int?
  assigned_by       Int?
  assigned_at       DateTime? @default(now()) @db.Timestamptz(6)
  assignment_notes  String?
  status            String?   @default("active") @db.VarChar(20)
  created_at        DateTime? @default(now()) @db.Timestamptz(6)
  updated_at        DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This table contains exclusion constraints and requires additional setup for migrations. Visit https://pris.ly/d/exclusion-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model vehicle_availability_blocks {
  id              Int       @default(autoincrement())
  vehicle_id      Int
  block_date      DateTime  @db.Date
  start_time      DateTime  @db.Time(6)
  end_time        DateTime  @db.Time(6)
  block_type      String    @default("booking") @db.VarChar(20)
  booking_id      Int?
  brand_id        Int?
  created_by      Int?
  notes           String?
  created_at      DateTime? @default(now()) @db.Timestamptz(6)
  updated_at      DateTime? @default(now()) @db.Timestamptz(6)
  hold_expires_at DateTime? @db.Timestamptz(6)
  held_by_session String?   @db.VarChar(100)
  allow_overlap   Boolean?  @default(false)

  @@index([vehicle_id, block_date], map: "idx_availability_vehicle_date")
  @@index([block_date, start_time, end_time], map: "idx_availability_date_range")
  @@index([block_type], map: "idx_availability_type")
  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model vehicle_incidents {
  id                  String    @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  vehicle_id          Int
  booking_id          Int?
  driver_id           Int?
  reported_by         Int?
  incident_type       String    @db.VarChar(50)
  incident_date       DateTime? @default(now()) @db.Timestamptz(6)
  description         String
  location            String?   @db.VarChar(255)
  severity            String?   @default("minor") @db.VarChar(20)
  fee_amount          Decimal?  @db.Decimal(10, 2)
  repair_cost         Decimal?  @db.Decimal(10, 2)
  total_charged       Decimal?  @db.Decimal(10, 2)
  charged_to_customer Boolean?  @default(false)
  charge_status       String?   @default("pending") @db.VarChar(20)
  payment_id          Int?
  photos              String[]
  documents           String[]
  resolved_at         DateTime? @db.Timestamptz(6)
  resolved_by         Int?
  resolution_notes    String?
  metadata            Json?     @default("{}")
  created_at          DateTime? @default(now()) @db.Timestamptz(6)
  updated_at          DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model vehicle_media {
  id            Int
  vehicle_id    Int
  media_id      Int
  view_type     String?   @default("exterior") @db.VarChar(50)
  is_primary    Boolean?  @default(false)
  display_order Int?      @default(0)
  created_at    DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model vehicles {
  id                      Int              @id @default(autoincrement())
  name                    String?          @db.VarChar(100)
  make                    String           @db.VarChar(50)
  model                   String           @db.VarChar(50)
  year                    Int?
  license_plate           String?          @unique @db.VarChar(20)
  vin                     String?          @db.VarChar(17)
  vehicle_number          String?          @db.VarChar(20)
  vehicle_type            String?          @default("sedan") @db.VarChar(30)
  capacity                Int?             @default(4)
  color                   String?          @db.VarChar(30)
  status                  String?          @default("active") @db.VarChar(20)
  brand_id                Int?
  brand_ids               Int[]            @default([])
  available_to_all_brands Boolean?         @default(true)
  current_mileage         Int?             @default(0)
  last_service_mileage    Int?
  next_service_mileage    Int?
  last_inspection_date    DateTime?        @db.Date
  insurance_expiry        DateTime?        @db.Date
  registration_expiry     DateTime?        @db.Date
  notes                   String?
  created_at              DateTime?        @default(now()) @db.Timestamptz(6)
  updated_at              DateTime?        @default(now()) @db.Timestamptz(6)
  is_active               Boolean?         @default(true)
  fuel_level              Int?             @default(100)
  last_service_date       DateTime?        @db.Date
  next_service_due        DateTime?        @db.Date
  dvir_reports            dvir_reports[]
  mileage_logs            mileage_logs[]
  vehicle_alerts          vehicle_alerts[]

  @@index([is_active], map: "idx_vehicles_is_active")
  @@index([brand_id], map: "idx_vehicles_brand_id")
  @@index([status], map: "idx_vehicles_status")
  @@index([vehicle_type], map: "idx_vehicles_vehicle_type")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model visitor_sessions {
  id               Int
  visitor_id       Int
  session_uuid     String    @db.Uuid
  started_at       DateTime  @default(now()) @db.Timestamptz(6)
  ended_at         DateTime? @db.Timestamptz(6)
  duration_seconds Int?
  pages_viewed     Int?      @default(0)
  queries_count    Int?      @default(0)
  device_type      String?   @db.VarChar(50)
  user_agent       String?
  ip_address       String?   @db.Inet
  created_at       DateTime  @default(now()) @db.Timestamptz(6)
  booking_started  Boolean?  @default(false)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model visitors {
  id                   Int
  visitor_uuid         String   @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email                String?  @db.VarChar(255)
  name                 String?  @db.VarChar(255)
  phone                String?  @db.VarChar(50)
  first_visit_at       DateTime @default(now()) @db.Timestamptz(6)
  last_visit_at        DateTime @default(now()) @db.Timestamptz(6)
  visit_count          Int      @default(1)
  total_queries        Int      @default(0)
  referral_source      String?  @db.VarChar(255)
  utm_source           String?  @db.VarChar(100)
  utm_medium           String?  @db.VarChar(100)
  utm_campaign         String?  @db.VarChar(100)
  landing_page         String?
  user_agent           String?
  device_type          String?  @db.VarChar(50)
  browser              String?  @db.VarChar(50)
  os                   String?  @db.VarChar(50)
  converted_to_booking Boolean? @default(false)
  first_booking_id     Int?
  total_bookings       Int?     @default(0)
  total_revenue        Decimal? @default(0) @db.Decimal(10, 2)
  preferences          Json?    @default("{}")
  gdpr_consent         Boolean? @default(false)
  marketing_consent    Boolean? @default(false)
  created_at           DateTime @default(now()) @db.Timestamptz(6)
  updated_at           DateTime @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model voice_transcriptions {
  id                     Int
  session_id             String    @db.VarChar(255)
  user_id                Int?
  audio_duration_seconds Decimal?  @db.Decimal(10, 3)
  transcript             String
  confidence             Decimal?  @db.Decimal(5, 4)
  api_cost               Decimal?  @db.Decimal(10, 6)
  created_at             DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model weekly_hos {
  id                    Int
  driver_id             Int
  week_start_date       DateTime @db.Date
  total_driving_hours   Decimal? @default(0) @db.Decimal(5, 2)
  total_on_duty_hours   Decimal? @default(0) @db.Decimal(5, 2)
  limit_type            String?  @default("60") @db.VarChar(10)
  limit_hours           Int?     @default(60)
  violation_flag        Boolean? @default(false)
  violation_description String?
  created_at            DateTime @default(now()) @db.Timestamptz(6)
  updated_at            DateTime @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model wine_purchases {
  id                      Int
  customer_id             Int
  booking_id              Int
  winery_id               Int
  wine_name               String    @db.VarChar(255)
  wine_varietal           String?   @db.VarChar(100)
  vintage                 Int?
  quantity                Int
  price_per_bottle        Decimal   @db.Decimal(8, 2)
  total_price             Decimal   @db.Decimal(10, 2)
  shipment_carrier        String?   @db.VarChar(50)
  tracking_number         String?   @db.VarChar(100)
  shipment_status         String?   @default("pending") @db.VarChar(50)
  shipped_date            DateTime? @db.Date
  estimated_delivery_date DateTime? @db.Date
  actual_delivery_date    DateTime? @db.Date
  commission_rate         Decimal?  @db.Decimal(4, 2)
  commission_amount       Decimal?  @db.Decimal(10, 2)
  commission_paid         Boolean?  @default(false)
  created_at              DateTime  @default(now()) @db.Timestamp(6)
  updated_at              DateTime  @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model wineries {
  id                               Int                    @id
  name                             String                 @db.VarChar(255)
  slug                             String                 @db.VarChar(255)
  description                      String?
  short_description                String?                @db.VarChar(500)
  founded_year                     Int?
  winemaker                        String?                @db.VarChar(255)
  owner                            String?                @db.VarChar(255)
  address                          String?                @db.VarChar(500)
  city                             String?                @default("Walla Walla") @db.VarChar(100)
  state                            String?                @default("WA") @db.VarChar(2)
  zip_code                         String?                @db.VarChar(10)
  latitude                         Decimal?               @db.Decimal(10, 8)
  longitude                        Decimal?               @db.Decimal(11, 8)
  phone                            String?                @db.VarChar(20)
  email                            String?                @db.VarChar(255)
  website                          String?                @db.VarChar(500)
  tasting_fee                      Decimal?               @db.Decimal(6, 2)
  tasting_fee_waived_with_purchase Boolean?               @default(true)
  minimum_purchase_for_waiver      Int?                   @default(2)
  reservation_required             Boolean?               @default(false)
  accepts_walkins                  Boolean?               @default(true)
  average_visit_duration           Int?                   @default(60)
  specialties                      String[]
  production_volume                String?                @db.VarChar(50)
  price_range                      String?                @db.VarChar(50)
  hours_of_operation               Json?
  seasonal_hours                   Json?
  amenities                        String[]
  accessibility_features           String[]
  logo_url                         String?                @db.VarChar(500)
  cover_photo_url                  String?                @db.VarChar(500)
  photos                           Json?
  virtual_tour_url                 String?                @db.VarChar(500)
  video_url                        String?                @db.VarChar(500)
  average_rating                   Decimal?               @default(0) @db.Decimal(2, 1)
  review_count                     Int?                   @default(0)
  curator_notes                    String?
  wine_enthusiast_rating           Int?
  wine_spectator_rating            Int?
  meta_title                       String?                @db.VarChar(255)
  meta_description                 String?                @db.VarChar(500)
  keywords                         String[]
  is_partner                       Boolean?               @default(false)
  partner_since                    DateTime?              @db.Date
  commission_rate                  Decimal?               @db.Decimal(4, 2)
  special_offers                   Json?
  contact_name                     String?                @db.VarChar(255)
  contact_email                    String?                @db.VarChar(255)
  is_active                        Boolean?               @default(true)
  is_featured                      Boolean?               @default(false)
  display_order                    Int?
  created_at                       DateTime               @default(now()) @db.Timestamp(6)
  updated_at                       DateTime               @default(now()) @db.Timestamp(6)
  ava                              String?                @db.VarChar(100)
  embedding                        Unsupported("vector")?
  walk_ins_welcome                 Boolean?               @default(true)
  annual_production_cases          Int?
  vineyard_acres                   Decimal?               @db.Decimal(10, 2)
  experience_tags                  String[]               @default([])
  min_group_size                   Int?
  max_group_size                   Int?
  booking_advance_days_min         Int?
  booking_advance_days_max         Int?
  cancellation_policy              String?                @db.VarChar(50)
  pet_policy                       String?                @db.VarChar(50)
  data_source                      String?                @db.VarChar(50)
  source_url                       String?                @db.VarChar(500)
  verified                         Boolean?               @default(false)
  verified_at                      DateTime?              @db.Timestamptz(6)
  last_data_refresh                DateTime?              @db.Timestamptz(6)
  verified_by                      Int?
  features                         String[]
  featured_photo_override_id       Int?
  trip_proposal_stops              trip_proposal_stops[]
  featured_photo_override          media_library?         @relation("winery_featured_photo_override", fields: [featured_photo_override_id], references: [id], onUpdate: NoAction)

  @@index([is_active], map: "idx_wineries_active")
  @@index([is_active, is_featured], map: "idx_wineries_active_featured")
  @@index([ava], map: "idx_wineries_ava")
  @@index([is_featured], map: "idx_wineries_featured")
  @@index([slug], map: "idx_wineries_slug")
  @@index([experience_tags], map: "idx_wineries_experience_tags", type: Gin)
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model winery_content {
  id            Int
  winery_id     Int?
  content_type  String                 @db.VarChar(50)
  title         String?                @db.VarChar(255)
  content       String
  metadata      Json?
  embedding     Unsupported("vector")?
  created_at    DateTime?              @default(now()) @db.Timestamptz(6)
  updated_at    DateTime?              @default(now()) @db.Timestamptz(6)
  data_source   String?                @db.VarChar(50)
  verified      Boolean?               @default(false)
  verified_at   DateTime?              @db.Timestamptz(6)
  is_featured   Boolean?               @default(false)
  display_order Int?                   @default(0)
  created_by    Int?
  verified_by   Int?

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model winery_faqs {
  id         Int
  winery_id  Int?
  question   String
  answer     String
  category   String?                @db.VarChar(100)
  embedding  Unsupported("vector")?
  created_at DateTime?              @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model winery_media {
  id            Int       @default(autoincrement())
  winery_id     Int
  media_id      Int
  display_order Int?      @default(0)
  is_primary    Boolean?  @default(false)
  section       String?   @default("gallery") @db.VarChar(100)
  created_at    DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model winery_people {
  id         Int
  winery_id  Int?
  name       String                 @db.VarChar(255)
  role       String                 @db.VarChar(100)
  bio        String?
  photo_url  String?                @db.VarChar(500)
  email      String?                @db.VarChar(255)
  embedding  Unsupported("vector")?
  created_at DateTime?              @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model winery_reviews {
  id                Int
  winery_id         Int
  customer_id       Int?
  booking_id        Int?
  rating            Int
  title             String?   @db.VarChar(255)
  review_text       String?
  visit_date        DateTime? @db.Date
  wines_purchased   String[]
  total_spent       Decimal?  @db.Decimal(10, 2)
  helpful_count     Int?      @default(0)
  not_helpful_count Int?      @default(0)
  is_verified       Boolean?  @default(false)
  is_approved       Boolean?  @default(true)
  is_featured       Boolean?  @default(false)
  moderated_at      DateTime? @db.Timestamp(6)
  moderated_by      Int?
  created_at        DateTime  @default(now()) @db.Timestamp(6)
  updated_at        DateTime  @default(now()) @db.Timestamp(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model wines {
  id                     Int
  winery_id              Int?
  name                   String                 @db.VarChar(255)
  vintage                Int?
  slug                   String?                @db.VarChar(150)
  status                 String?                @default("current_release") @db.VarChar(50)
  is_club_exclusive      Boolean?               @default(false)
  is_featured            Boolean?               @default(false)
  varietals              Json?
  vineyard_sources       Json?
  ava                    String?                @db.VarChar(100)
  elevation_feet         Int?
  soil_type              String?                @db.VarChar(255)
  vine_age_years         Int?
  yield_tons_per_acre    Decimal?               @db.Decimal(4, 2)
  harvest_date           DateTime?              @db.Date
  harvest_method         String?                @db.VarChar(50)
  fermentation_vessel    String?                @db.VarChar(100)
  fermentation_days      Int?
  malolactic             Boolean?
  oak_treatment          Json?
  aging_months           Int?
  bottling_date          DateTime?              @db.Date
  cases_produced         Int?
  official_tasting_notes String?
  aroma_profile          Json?
  palate_profile         Json?
  food_pairings          String[]
  serving_temp_f_low     Int?
  serving_temp_f_high    Int?
  decant_time_minutes    Int?
  drink_window_start     Int?
  drink_window_end       Int?
  aging_potential        String?                @db.VarChar(100)
  alcohol_pct            Decimal?               @db.Decimal(4, 2)
  ph                     Decimal?               @db.Decimal(3, 2)
  ta                     Decimal?               @db.Decimal(4, 2)
  rs                     Decimal?               @db.Decimal(5, 2)
  price                  Decimal?               @db.Decimal(10, 2)
  club_price             Decimal?               @db.Decimal(10, 2)
  awards                 Json?
  ratings                Json?
  vintage_story          String?
  winemaker_notes        String?
  label_story            String?
  bottle_image_url       String?                @db.VarChar(500)
  label_image_url        String?                @db.VarChar(500)
  embedding              Unsupported("vector")?
  created_at             DateTime?              @default(now()) @db.Timestamptz(6)
  updated_at             DateTime?              @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// Stores tip payments from guests collected via QR code/payment link at tour end
model driver_tips {
  id                       Int       @id @default(autoincrement())
  booking_id               Int
  driver_id                Int
  guest_name               String?   @db.VarChar(255)
  amount                   Decimal   @db.Decimal(10, 2)
  stripe_payment_intent_id String?   @unique @db.VarChar(255)
  stripe_charge_id         String?   @db.VarChar(100)
  card_brand               String?   @db.VarChar(20)
  card_last4               String?   @db.VarChar(4)
  payment_status           String?   @default("pending") @db.VarChar(50)
  tip_source               String?   @default("qr_code") @db.VarChar(50)
  payroll_exported         Boolean?  @default(false)
  payroll_exported_at      DateTime? @db.Timestamptz(6)
  created_at               DateTime? @default(now()) @db.Timestamptz(6)
  updated_at               DateTime? @default(now()) @db.Timestamptz(6)
  bookings                 bookings  @relation(fields: [booking_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users                    users     @relation(fields: [driver_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([booking_id], map: "idx_driver_tips_booking")
  @@index([driver_id], map: "idx_driver_tips_driver")
  @@index([payment_status], map: "idx_driver_tips_status")
  @@index([created_at(sort: Desc)], map: "idx_driver_tips_created")
}

/// Driver-entered expenses like lunch costs with receipt photo uploads
model tour_expenses {
  id                   Int       @id @default(autoincrement())
  booking_id           Int
  driver_id            Int
  expense_type         String    @db.VarChar(50)
  amount               Decimal   @db.Decimal(10, 2)
  description          String?
  receipt_url          String?   @db.VarChar(500)
  receipt_storage_path String?   @db.VarChar(500)
  reimbursement_status String?   @default("pending") @db.VarChar(50)
  reimbursed_at        DateTime? @db.Timestamptz(6)
  created_at           DateTime? @default(now()) @db.Timestamptz(6)
  updated_at           DateTime? @default(now()) @db.Timestamptz(6)
  bookings             bookings  @relation(fields: [booking_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users                users     @relation(fields: [driver_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([booking_id], map: "idx_tour_expenses_booking")
  @@index([driver_id], map: "idx_tour_expenses_driver")
  @@index([expense_type], map: "idx_tour_expenses_type")
  @@index([reimbursement_status], map: "idx_tour_expenses_status")
  @@index([created_at(sort: Desc)], map: "idx_tour_expenses_created")
}

/// Tracks tour completion and stores tip collection payment link info
model tour_completions {
  id               Int       @id @default(autoincrement())
  booking_id       Int       @unique
  driver_id        Int
  completed_at     DateTime? @default(now()) @db.Timestamptz(6)
  lunch_cost_total Decimal?  @db.Decimal(10, 2)
  tip_code         String?   @unique @db.VarChar(20)
  tip_payment_link String?   @db.VarChar(500)
  tip_qr_code_url  String?   @db.VarChar(500)
  driver_notes     String?
  tips_enabled     Boolean?  @default(true)
  created_at       DateTime? @default(now()) @db.Timestamptz(6)
  updated_at       DateTime? @default(now()) @db.Timestamptz(6)
  bookings         bookings  @relation(fields: [booking_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users            users     @relation(fields: [driver_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([driver_id], map: "idx_tour_completions_driver")
  @@index([completed_at(sort: Desc)], map: "idx_tour_completions_completed")
  @@index([booking_id], map: "idx_tour_completions_booking")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model workflows {
  id            Int
  driver_id     Int
  workflow_date DateTime @db.Date
  created_at    DateTime @default(now()) @db.Timestamp(6)
  updated_at    DateTime @default(now()) @db.Timestamp(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model ai_learning_preferences {
  id                 Int       @id @default(autoincrement())
  preference_type    String    @db.VarChar(100)
  platform           String?   @db.VarChar(50)
  pattern            String
  confidence_score   Decimal?  @default(0.50) @db.Decimal(3, 2)
  learned_from_count Int?      @default(1)
  example_content    String?
  is_active          Boolean?  @default(true)
  created_at         DateTime? @default(now()) @db.Timestamptz(6)
  updated_at         DateTime? @default(now()) @db.Timestamptz(6)

  @@index([platform], map: "idx_ai_preferences_platform")
  @@index([preference_type], map: "idx_ai_preferences_type")
}

model analytics_events {
  id                 BigInt              @id @default(autoincrement())
  session_id         String?             @db.Uuid
  visitor_id         String              @db.VarChar(255)
  event_type         String              @db.VarChar(50)
  event_name         String?             @db.VarChar(100)
  timestamp          DateTime            @default(now()) @db.Timestamp(6)
  page_url           String?
  page_path          String?             @db.VarChar(255)
  page_section       String?             @db.VarChar(50)
  properties         Json?
  element_type       String?             @db.VarChar(50)
  element_id         String?             @db.VarChar(100)
  element_text       String?             @db.VarChar(255)
  target_url         String?
  scroll_depth       Int?
  time_on_page       Int?
  active_time        Int?
  analytics_sessions analytics_sessions? @relation(fields: [session_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([session_id], map: "idx_analytics_events_session")
  @@index([timestamp], map: "idx_analytics_events_timestamp")
  @@index([event_type], map: "idx_analytics_events_type")
  @@index([visitor_id], map: "idx_analytics_events_visitor")
}

model analytics_page_stats {
  id               Int      @id @default(autoincrement())
  page_path        String   @db.VarChar(255)
  date             DateTime @db.Date
  page_views       Int?     @default(0)
  unique_visitors  Int?     @default(0)
  avg_time_on_page Int?
  avg_scroll_depth Int?
  bounce_rate      Decimal? @db.Decimal(5, 2)
  exit_count       Int?     @default(0)
  exit_rate        Decimal? @db.Decimal(5, 2)

  @@unique([page_path, date])
  @@index([date], map: "idx_analytics_page_stats_date")
}

model analytics_sessions {
  id                   String             @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  visitor_id           String             @db.VarChar(255)
  entry_url            String
  entry_path           String?            @db.VarChar(255)
  referrer             String?
  utm_source           String?            @db.VarChar(100)
  utm_medium           String?            @db.VarChar(100)
  utm_campaign         String?            @db.VarChar(100)
  device_type          String?            @db.VarChar(20)
  browser              String?            @db.VarChar(100)
  os                   String?            @db.VarChar(100)
  screen_size          String?            @db.VarChar(20)
  country              String?            @db.VarChar(100)
  region               String?            @db.VarChar(100)
  city                 String?            @db.VarChar(100)
  started_at           DateTime           @default(now()) @db.Timestamp(6)
  ended_at             DateTime?          @db.Timestamp(6)
  page_views           Int?               @default(0)
  total_time_seconds   Int?
  active_time_seconds  Int?
  opened_chat          Boolean?           @default(false)
  sent_chat_message    Boolean?           @default(false)
  viewed_itinerary     Boolean?           @default(false)
  started_booking      Boolean?           @default(false)
  completed_deposit    Boolean?           @default(false)
  converted_to_booking Boolean?           @default(false)
  booking_id           Int?
  analytics_events     analytics_events[]

  @@index([started_at], map: "idx_analytics_sessions_started")
  @@index([visitor_id], map: "idx_analytics_sessions_visitor")
}

model analytics_visitor_journeys {
  id                     Int       @id @default(autoincrement())
  visitor_id             String    @unique @db.VarChar(255)
  first_visit_at         DateTime? @db.Timestamp(6)
  first_referrer         String?
  first_utm_source       String?   @db.VarChar(100)
  total_sessions         Int?      @default(0)
  total_page_views       Int?      @default(0)
  total_time_seconds     Int?      @default(0)
  chat_sessions          Int?      @default(0)
  total_chat_messages    Int?      @default(0)
  itineraries_generated  Int?      @default(0)
  booking_attempts       Int?      @default(0)
  deposits_paid          Int?      @default(0)
  total_booking_value    Decimal?  @default(0) @db.Decimal(10, 2)
  last_visit_at          DateTime? @db.Timestamp(6)
  days_since_first_visit Int?
  updated_at             DateTime? @default(now()) @db.Timestamp(6)

  @@index([visitor_id], map: "idx_analytics_journeys_visitor")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model blog_drafts {
  id                                   Int       @id @default(autoincrement())
  title                                String    @db.VarChar(500)
  slug                                 String?   @db.VarChar(500)
  meta_description                     String?   @db.VarChar(320)
  target_keywords                      String[]  @default([])
  content                              String
  word_count                           Int?      @default(0)
  estimated_read_time                  Int?      @default(0)
  json_ld                              Json?
  featured_image_url                   String?   @db.VarChar(2000)
  featured_image_alt                   String?   @db.VarChar(500)
  category                             String?   @db.VarChar(100)
  tags                                 String[]  @default([])
  status                               String?   @default("draft") @db.VarChar(50)
  published_url                        String?   @db.VarChar(2000)
  published_at                         DateTime? @db.Timestamptz(6)
  seo_score                            Int?
  readability_score                    Int?
  created_by                           Int?
  reviewed_by                          Int?
  created_at                           DateTime? @default(now()) @db.Timestamptz(6)
  updated_at                           DateTime? @default(now()) @db.Timestamptz(6)
  performance                          Json?     @default("{}")
  performance_synced_at                DateTime? @db.Timestamptz(6)
  users_blog_drafts_created_byTousers  users?    @relation("blog_drafts_created_byTousers", fields: [created_by], references: [id], onUpdate: NoAction)
  users_blog_drafts_reviewed_byTousers users?    @relation("blog_drafts_reviewed_byTousers", fields: [reviewed_by], references: [id], onUpdate: NoAction)

  @@index([category], map: "idx_blog_drafts_category")
  @@index([status], map: "idx_blog_drafts_status")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model booking_attempts {
  id                      Int
  session_id              String    @db.VarChar(64)
  visitor_id              String?   @db.VarChar(64)
  email                   String?   @db.VarChar(255)
  name                    String?   @db.VarChar(255)
  phone                   String?   @db.VarChar(50)
  tour_date               DateTime? @db.Date
  start_time              DateTime? @db.Time(6)
  duration_hours          Decimal?  @db.Decimal(4, 2)
  party_size              Int?
  pickup_location         String?
  selected_wineries       Json?     @default("[]")
  step_reached            String    @default("started") @db.VarChar(50)
  form_data               Json?     @default("{}")
  converted_to_booking_id Int?
  converted_at            DateTime? @db.Timestamptz(6)
  follow_up_sent_at       DateTime? @db.Timestamptz(6)
  follow_up_email_id      String?   @db.VarChar(100)
  unsubscribed            Boolean?  @default(false)
  utm_source              String?   @db.VarChar(100)
  utm_medium              String?   @db.VarChar(100)
  utm_campaign            String?   @db.VarChar(100)
  referrer                String?
  landing_page            String?
  user_agent              String?
  device_type             String?   @db.VarChar(20)
  browser                 String?   @db.VarChar(50)
  brand_id                Int?
  created_at              DateTime? @default(now()) @db.Timestamptz(6)
  updated_at              DateTime? @default(now()) @db.Timestamptz(6)
  last_activity_at        DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model booking_clicks {
  id                   Int       @id @default(autoincrement())
  winery_id            Int?
  winery_slug          String    @db.VarChar(255)
  referrer             String?
  user_agent           String?
  ip_address           String?   @db.VarChar(45)
  session_id           String?   @db.VarChar(255)
  user_id              Int?
  converted_to_booking Boolean?  @default(false)
  booking_id           Int?
  created_at           DateTime? @default(now()) @db.Timestamptz(6)

  @@index([created_at], map: "idx_booking_clicks_created")
  @@index([winery_slug], map: "idx_booking_clicks_slug")
  @@index([winery_id], map: "idx_booking_clicks_winery")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model break_records {
  id               Int        @id @default(autoincrement())
  time_card_id     Int
  driver_id        Int
  break_start      DateTime   @default(now()) @db.Timestamptz(6)
  break_end        DateTime?  @db.Timestamptz(6)
  duration_minutes Int?
  break_type       String     @default("rest") @db.VarChar(20)
  notes            String?
  created_at       DateTime?  @default(now()) @db.Timestamptz(6)
  updated_at       DateTime?  @default(now()) @db.Timestamptz(6)
  users            users      @relation(fields: [driver_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  time_cards       time_cards @relation(fields: [time_card_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([driver_id], map: "idx_break_records_driver")
  @@index([break_start], map: "idx_break_records_start")
  @@index([time_card_id], map: "idx_break_records_time_card")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model business_import_batches {
  id              Int       @id @default(autoincrement())
  batch_id        String    @unique @db.VarChar(100)
  file_name       String?   @db.VarChar(255)
  source_type     String    @db.VarChar(50)
  total_rows      Int?      @default(0)
  imported_count  Int?      @default(0)
  skipped_count   Int?      @default(0)
  error_count     Int?      @default(0)
  duplicate_count Int?      @default(0)
  status          String?   @default("pending") @db.VarChar(20)
  error_details   Json?
  imported_by     Int?
  started_at      DateTime? @default(now()) @db.Timestamptz(6)
  completed_at    DateTime? @db.Timestamptz(6)
  notes           String?
  users           users?    @relation(fields: [imported_by], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([batch_id], map: "idx_import_batches_batch_id")
  @@index([imported_by], map: "idx_import_batches_imported_by")
  @@index([status], map: "idx_import_batches_status")
}

model business_invitation_history {
  id            Int        @id @default(autoincrement())
  business_id   Int
  action        String     @db.VarChar(50)
  invite_token  String?    @db.VarChar(100)
  email_sent_to String?    @db.VarChar(255)
  performed_by  Int?
  notes         String?
  created_at    DateTime?  @default(now()) @db.Timestamp(6)
  businesses    businesses @relation(fields: [business_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([action], map: "idx_invitation_history_action")
  @@index([business_id], map: "idx_invitation_history_business")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model campaign_items {
  id                  Int                 @id @default(autoincrement())
  campaign_id         Int
  channel             String              @db.VarChar(50)
  item_type           String              @db.VarChar(50)
  content             String
  subject_line        String?             @db.VarChar(500)
  media_urls          String[]            @default([])
  scheduled_for       DateTime?           @db.Timestamptz(6)
  status              String?             @default("draft") @db.VarChar(50)
  scheduled_post_id   Int?
  performance         Json?               @default("{}")
  created_at          DateTime?           @default(now()) @db.Timestamptz(6)
  updated_at          DateTime?           @default(now()) @db.Timestamptz(6)
  marketing_campaigns marketing_campaigns @relation(fields: [campaign_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  scheduled_posts     scheduled_posts?    @relation(fields: [scheduled_post_id], references: [id], onUpdate: NoAction)

  @@index([campaign_id], map: "idx_campaign_items_campaign")
  @@index([channel], map: "idx_campaign_items_channel")
  @@index([status], map: "idx_campaign_items_status")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model competitive_advantages {
  id                     Int       @id @default(autoincrement())
  title                  String    @db.VarChar(255)
  description            String
  category               String    @db.VarChar(50)
  importance             String?   @default("high") @db.VarChar(20)
  supporting_evidence    String?
  customer_testimonial   String?
  applies_to_competitors Int[]     @default([])
  marketing_message      String?
  use_in_proposals       Boolean?  @default(true)
  use_on_website         Boolean?  @default(true)
  is_active              Boolean?  @default(true)
  last_validated_at      DateTime? @db.Timestamptz(6)
  created_at             DateTime? @default(now()) @db.Timestamptz(6)
  updated_at             DateTime? @default(now()) @db.Timestamptz(6)
  created_by             Int?
  users                  users?    @relation(fields: [created_by], references: [id], onUpdate: NoAction)

  @@index([category], map: "idx_competitive_advantages_category")
  @@index([importance], map: "idx_competitive_advantages_importance")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model competitor_alerts {
  id                 Int                 @id @default(autoincrement())
  alert_type         String              @db.VarChar(50)
  competitor_id      Int?
  change_id          Int?
  subject            String              @db.VarChar(255)
  body               String
  recipients         Json                @default("[]")
  sent_at            DateTime?           @db.Timestamptz(6)
  delivery_status    String?             @default("pending") @db.VarChar(20)
  delivery_error     String?
  created_at         DateTime?           @default(now()) @db.Timestamptz(6)
  competitor_changes competitor_changes? @relation(fields: [change_id], references: [id], onUpdate: NoAction)
  competitors        competitors?        @relation(fields: [competitor_id], references: [id], onUpdate: NoAction)

  @@index([delivery_status], map: "idx_competitor_alerts_status")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model competitor_changes {
  id                     Int                 @id @default(autoincrement())
  competitor_id          Int
  change_type            String              @db.VarChar(50)
  significance           String              @default("medium") @db.VarChar(20)
  title                  String              @db.VarChar(255)
  description            String
  previous_value         String?
  new_value              String?
  threat_level           String?             @db.VarChar(20)
  ai_analysis            String?
  recommended_actions    Json?               @default("[]")
  strategic_implications String?
  status                 String?             @default("new") @db.VarChar(20)
  reviewed_at            DateTime?           @db.Timestamptz(6)
  reviewed_by            Int?
  action_taken           String?
  action_taken_at        DateTime?           @db.Timestamptz(6)
  source_url             String?             @db.VarChar(2000)
  detected_at            DateTime?           @default(now()) @db.Timestamptz(6)
  created_at             DateTime?           @default(now()) @db.Timestamptz(6)
  updated_at             DateTime?           @default(now()) @db.Timestamptz(6)
  competitor_alerts      competitor_alerts[]
  competitors            competitors         @relation(fields: [competitor_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users                  users?              @relation(fields: [reviewed_by], references: [id], onUpdate: NoAction)

  @@index([competitor_id], map: "idx_competitor_changes_competitor")
  @@index([detected_at(sort: Desc)], map: "idx_competitor_changes_detected")
  @@index([status], map: "idx_competitor_changes_status")
  @@index([change_type], map: "idx_competitor_changes_type")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model competitor_pricing {
  id                       Int         @id @default(autoincrement())
  competitor_id            Int
  pricing_type             String      @db.VarChar(50)
  pricing_name             String      @db.VarChar(255)
  price_amount             Decimal?    @db.Decimal(10, 2)
  price_unit               String?     @db.VarChar(50)
  price_notes              String?
  comparable_to_nw_touring Boolean?    @default(false)
  nw_touring_equivalent    String?     @db.VarChar(255)
  is_current               Boolean?    @default(true)
  effective_from           DateTime?   @default(dbgenerated("CURRENT_DATE")) @db.Date
  effective_until          DateTime?   @db.Date
  captured_at              DateTime?   @default(now()) @db.Timestamptz(6)
  created_at               DateTime?   @default(now()) @db.Timestamptz(6)
  updated_at               DateTime?   @default(now()) @db.Timestamptz(6)
  competitors              competitors @relation(fields: [competitor_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([captured_at(sort: Desc)], map: "idx_competitor_pricing_captured")
  @@index([competitor_id], map: "idx_competitor_pricing_competitor")
  @@index([pricing_type], map: "idx_competitor_pricing_type")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model competitor_snapshots {
  id            Int         @id @default(autoincrement())
  competitor_id Int
  page_type     String      @db.VarChar(50)
  page_url      String      @db.VarChar(2000)
  content_hash  String?     @db.VarChar(64)
  content_text  String?
  raw_html      String?
  http_status   Int?
  captured_at   DateTime?   @default(now()) @db.Timestamptz(6)
  competitors   competitors @relation(fields: [competitor_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([competitor_id, page_type])
  @@index([captured_at(sort: Desc)], map: "idx_competitor_snapshots_captured")
  @@index([competitor_id], map: "idx_competitor_snapshots_competitor")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model competitor_swot {
  id            Int         @id @default(autoincrement())
  competitor_id Int
  category      String      @db.VarChar(20)
  title         String      @db.VarChar(255)
  description   String?
  impact_level  String?     @default("medium") @db.VarChar(20)
  is_active     Boolean?    @default(true)
  verified_at   DateTime?   @db.Timestamptz(6)
  source        String?
  created_at    DateTime?   @default(now()) @db.Timestamptz(6)
  updated_at    DateTime?   @default(now()) @db.Timestamptz(6)
  created_by    Int?
  competitors   competitors @relation(fields: [competitor_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users         users?      @relation(fields: [created_by], references: [id], onUpdate: NoAction)

  @@index([competitor_id, category], map: "idx_competitor_swot_category")
  @@index([competitor_id], map: "idx_competitor_swot_competitor")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model competitors {
  id                      Int                    @id @default(autoincrement())
  name                    String                 @db.VarChar(255)
  website_url             String                 @db.VarChar(500)
  description             String?
  competitor_type         String?                @default("tour_operator") @db.VarChar(50)
  priority_level          String?                @default("medium") @db.VarChar(20)
  check_frequency         String?                @default("daily") @db.VarChar(20)
  monitor_pricing         Boolean?               @default(true)
  monitor_promotions      Boolean?               @default(true)
  monitor_packages        Boolean?               @default(true)
  monitor_content         Boolean?               @default(true)
  monitored_pages         Json?                  @default("[\"pricing\", \"tours\", \"homepage\"]")
  email_recipients        Json?                  @default("[]")
  alert_on_high_threat    Boolean?               @default(true)
  notes                   String?
  logo_url                String?                @db.VarChar(500)
  pricing_model           String?                @db.VarChar(100)
  min_booking             String?                @db.VarChar(100)
  vehicle_types           String[]
  is_active               Boolean?               @default(true)
  last_checked_at         DateTime?              @db.Timestamptz(6)
  last_change_detected_at DateTime?              @db.Timestamptz(6)
  created_at              DateTime?              @default(now()) @db.Timestamptz(6)
  updated_at              DateTime?              @default(now()) @db.Timestamptz(6)
  created_by              Int?
  competitor_alerts       competitor_alerts[]
  competitor_changes      competitor_changes[]
  competitor_pricing      competitor_pricing[]
  competitor_snapshots    competitor_snapshots[]
  competitor_swot         competitor_swot[]
  users                   users?                 @relation(fields: [created_by], references: [id], onUpdate: NoAction)

  @@index([last_checked_at(sort: Desc)], map: "idx_competitors_last_checked")
  @@index([priority_level], map: "idx_competitors_priority")
  @@index([competitor_type], map: "idx_competitors_type")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model contact_inquiries {
  id             Int           @id @default(autoincrement())
  crm_contact_id Int?
  name           String        @db.VarChar(255)
  email          String        @db.VarChar(255)
  phone          String?       @db.VarChar(50)
  dates          String?       @db.VarChar(255)
  group_size     String?       @db.VarChar(50)
  message        String
  inquiry_type   String?       @default("general") @db.VarChar(50)
  source         String?       @default("website") @db.VarChar(100)
  source_detail  String?       @db.VarChar(255)
  status         String?       @default("new") @db.VarChar(50)
  responded_at   DateTime?     @db.Timestamptz(6)
  responded_by   Int?
  created_at     DateTime?     @default(now()) @db.Timestamptz(6)
  updated_at     DateTime?     @default(now()) @db.Timestamptz(6)
  crm_contacts   crm_contacts? @relation(fields: [crm_contact_id], references: [id], onUpdate: NoAction)

  @@index([created_at(sort: Desc)], map: "idx_contact_inquiries_created")
  @@index([crm_contact_id], map: "idx_contact_inquiries_crm_contact")
  @@index([email], map: "idx_contact_inquiries_email")
  @@index([status], map: "idx_contact_inquiries_status")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model content_approvals {
  id                    Int       @id @default(autoincrement())
  content_type          String    @db.VarChar(50)
  content_id            Int
  action                String    @db.VarChar(20)
  original_content      String
  final_content         String?
  edit_diff             String?
  platform              String?   @db.VarChar(50)
  content_category      String?   @db.VarChar(50)
  tone                  String?   @db.VarChar(50)
  approval_time_seconds Int?
  notes                 String?
  approved_by           Int?
  created_at            DateTime? @default(now()) @db.Timestamptz(6)
  users                 users?    @relation(fields: [approved_by], references: [id], onUpdate: NoAction)

  @@index([action], map: "idx_content_approvals_action")
  @@index([created_at(sort: Desc)], map: "idx_content_approvals_date")
  @@index([content_type], map: "idx_content_approvals_type")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model content_collections {
  id              Int       @id @default(autoincrement())
  collection_type String    @db.VarChar(50)
  slug            String    @db.VarChar(100)
  title           String    @db.VarChar(255)
  subtitle        String?   @db.VarChar(255)
  description     String?
  content         Json      @default("{}")
  image_url       String?   @db.VarChar(500)
  icon            String?   @db.VarChar(100)
  sort_order      Int?      @default(0)
  is_active       Boolean?  @default(true)
  metadata        Json?     @default("{}")
  created_at      DateTime? @default(now()) @db.Timestamptz(6)
  updated_at      DateTime? @default(now()) @db.Timestamptz(6)
  updated_by      Int?
  users           users?    @relation(fields: [updated_by], references: [id], onUpdate: NoAction)

  @@unique([collection_type, slug])
  @@index([collection_type, sort_order], map: "idx_content_collections_sort")
  @@index([collection_type], map: "idx_content_collections_type")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model content_history {
  id         Int       @id @default(autoincrement())
  table_name String    @db.VarChar(50)
  record_id  Int
  field_name String    @db.VarChar(100)
  old_value  String?
  new_value  String?
  changed_at DateTime? @default(now()) @db.Timestamptz(6)
  changed_by Int?
  users      users?    @relation(fields: [changed_by], references: [id], onUpdate: NoAction)

  @@index([changed_at(sort: Desc)], map: "idx_content_history_changed_at")
  @@index([table_name, record_id], map: "idx_content_history_record")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model content_refresh_suggestions {
  id                Int       @id @default(autoincrement())
  page_path         String    @db.VarChar(2000)
  page_title        String?   @db.VarChar(500)
  reason            String    @db.VarChar(100)
  current_content   String?
  suggested_update  String?
  urgency           String?   @default("medium") @db.VarChar(20)
  last_modified     DateTime? @db.Date
  days_since_update Int?
  impressions_trend String?   @db.VarChar(20)
  status            String?   @default("pending") @db.VarChar(50)
  applied_at        DateTime? @db.Timestamptz(6)
  applied_by        Int?
  created_at        DateTime? @default(now()) @db.Timestamptz(6)
  updated_at        DateTime? @default(now()) @db.Timestamptz(6)
  users             users?    @relation(fields: [applied_by], references: [id], onUpdate: NoAction)

  @@index([page_path], map: "idx_content_refresh_page")
  @@index([status], map: "idx_content_refresh_status")
  @@index([urgency], map: "idx_content_refresh_urgency")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model content_suggestions {
  id                   Int              @id @default(autoincrement())
  suggestion_date      DateTime         @default(dbgenerated("CURRENT_DATE")) @db.Date
  platform             String           @db.VarChar(50)
  content_type         String           @db.VarChar(50)
  winery_id            Int?
  winery_name          String?          @db.VarChar(255)
  suggested_content    String
  suggested_hashtags   String[]         @default([])
  suggested_time       DateTime?        @db.Timestamptz(6)
  suggested_media_urls String[]         @default([])
  media_source         String?          @default("library") @db.VarChar(50)
  image_search_query   String?          @db.VarChar(255)
  reasoning            String
  data_sources         Json?            @default("[]")
  priority             Int?             @default(5)
  relevance_score      Decimal?         @db.Decimal(3, 2)
  status               String?          @default("pending") @db.VarChar(50)
  scheduled_post_id    Int?
  accepted_at          DateTime?        @db.Timestamptz(6)
  accepted_by          Int?
  created_at           DateTime?        @default(now()) @db.Timestamptz(6)
  updated_at           DateTime?        @default(now()) @db.Timestamptz(6)
  users                users?           @relation(fields: [accepted_by], references: [id], onUpdate: NoAction)
  scheduled_posts      scheduled_posts? @relation(fields: [scheduled_post_id], references: [id], onUpdate: NoAction)

  @@index([suggestion_date, platform, status], map: "idx_content_suggestions_daily")
  @@index([suggestion_date(sort: Desc)], map: "idx_content_suggestions_date")
  @@index([platform], map: "idx_content_suggestions_platform")
  @@index([status], map: "idx_content_suggestions_status")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model crm_activities {
  id                    Int           @id @default(autoincrement())
  contact_id            Int?
  deal_id               Int?
  activity_type         String        @db.VarChar(50)
  subject               String?       @db.VarChar(255)
  body                  String?
  call_duration_minutes Int?
  call_outcome          String?       @db.VarChar(50)
  email_direction       String?       @db.VarChar(20)
  email_status          String?       @db.VarChar(20)
  performed_by          Int?
  performed_at          DateTime?     @default(now()) @db.Timestamptz(6)
  source_type           String?       @db.VarChar(50)
  source_id             String?       @db.VarChar(255)
  created_at            DateTime?     @default(now()) @db.Timestamptz(6)
  crm_contacts          crm_contacts? @relation(fields: [contact_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  crm_deals             crm_deals?    @relation(fields: [deal_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users                 users?        @relation(fields: [performed_by], references: [id], onUpdate: NoAction)

  @@index([performed_at(sort: Desc)], map: "idx_crm_activities_date")
  @@index([activity_type], map: "idx_crm_activities_type")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model crm_contacts {
  id                      Int                  @id @default(autoincrement())
  email                   String               @unique @db.VarChar(255)
  name                    String               @db.VarChar(255)
  phone                   String?              @db.VarChar(50)
  company                 String?              @db.VarChar(255)
  contact_type            String?              @default("individual") @db.VarChar(50)
  lifecycle_stage         String?              @default("lead") @db.VarChar(50)
  lead_score              Int?                 @default(0)
  lead_temperature        String?              @default("cold") @db.VarChar(20)
  source                  String?              @db.VarChar(100)
  source_detail           String?              @db.VarChar(255)
  preferred_wineries      String[]
  dietary_restrictions    String?              @db.VarChar(255)
  accessibility_needs     String?              @db.VarChar(255)
  notes                   String?
  email_marketing_consent Boolean?             @default(false)
  sms_marketing_consent   Boolean?             @default(false)
  total_bookings          Int?                 @default(0)
  total_revenue           Decimal?             @default(0) @db.Decimal(10, 2)
  last_booking_date       DateTime?            @db.Date
  assigned_to             Int?
  stripe_customer_id      String?              @db.VarChar(100)
  customer_id             Int?
  brand_id                Int?
  created_at              DateTime?            @default(now()) @db.Timestamptz(6)
  updated_at              DateTime?            @default(now()) @db.Timestamptz(6)
  last_contacted_at       DateTime?            @db.Timestamptz(6)
  next_follow_up_at       DateTime?            @db.Timestamptz(6)
  contact_inquiries       contact_inquiries[]
  corporate_requests      corporate_requests[]
  crm_activities          crm_activities[]
  users                   users?               @relation(fields: [assigned_to], references: [id], onUpdate: NoAction)
  customers               customers?           @relation(fields: [customer_id], references: [id], onUpdate: NoAction)
  crm_deals               crm_deals[]
  crm_tasks               crm_tasks[]

  @@index([assigned_to], map: "idx_crm_contacts_assigned")
  @@index([brand_id], map: "idx_crm_contacts_brand")
  @@index([email], map: "idx_crm_contacts_email")
  @@index([lifecycle_stage], map: "idx_crm_contacts_lifecycle")
  @@index([lead_temperature], map: "idx_crm_contacts_temperature")
}

model crm_deal_types {
  id                     Int                     @id @default(autoincrement())
  name                   String                  @db.VarChar(100)
  brand                  String?                 @db.VarChar(50)
  pipeline_template_id   Int?
  default_value          Decimal?                @db.Decimal(10, 2)
  sort_order             Int?                    @default(0)
  is_active              Boolean?                @default(true)
  created_at             DateTime?               @default(now()) @db.Timestamptz(6)
  crm_pipeline_templates crm_pipeline_templates? @relation(fields: [pipeline_template_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  crm_deals              crm_deals[]

  @@unique([name, brand])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model crm_deals {
  id                   Int                  @id @default(autoincrement())
  contact_id           Int
  stage_id             Int
  deal_type_id         Int?
  brand                String?              @db.VarChar(50)
  title                String               @db.VarChar(255)
  description          String?
  party_size           Int?
  expected_tour_date   DateTime?            @db.Date
  expected_close_date  DateTime?            @db.Date
  estimated_value      Decimal?             @db.Decimal(10, 2)
  actual_value         Decimal?             @db.Decimal(10, 2)
  won_at               DateTime?            @db.Timestamptz(6)
  lost_at              DateTime?            @db.Timestamptz(6)
  lost_reason          String?              @db.VarChar(255)
  consultation_id      Int?
  corporate_request_id Int?
  proposal_id          Int?
  trip_proposal_id     Int?
  booking_id           Int?
  assigned_to          Int?
  brand_id             Int?
  created_at           DateTime?            @default(now()) @db.Timestamptz(6)
  updated_at           DateTime?            @default(now()) @db.Timestamptz(6)
  stage_changed_at     DateTime?            @default(now()) @db.Timestamptz(6)
  corporate_requests   corporate_requests[]
  crm_activities       crm_activities[]
  users                users?               @relation(fields: [assigned_to], references: [id], onUpdate: NoAction)
  bookings             bookings?            @relation(fields: [booking_id], references: [id], onUpdate: NoAction)
  crm_contacts         crm_contacts         @relation(fields: [contact_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  crm_deal_types       crm_deal_types?      @relation(fields: [deal_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  proposals            proposals?           @relation(fields: [proposal_id], references: [id], onUpdate: NoAction)
  crm_pipeline_stages  crm_pipeline_stages  @relation(fields: [stage_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  crm_tasks            crm_tasks[]

  @@index([assigned_to], map: "idx_crm_deals_assigned")
  @@index([brand], map: "idx_crm_deals_brand")
  @@index([brand_id], map: "idx_crm_deals_brand_id")
  @@index([expected_close_date], map: "idx_crm_deals_close_date")
  @@index([contact_id], map: "idx_crm_deals_contact")
  @@index([stage_id], map: "idx_crm_deals_stage")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model crm_pipeline_stages {
  id                     Int                     @id @default(autoincrement())
  template_id            Int?
  name                   String                  @db.VarChar(100)
  sort_order             Int
  probability            Int?                    @default(50)
  is_won                 Boolean?                @default(false)
  is_lost                Boolean?                @default(false)
  color                  String?                 @default("slate") @db.VarChar(20)
  created_at             DateTime?               @default(now()) @db.Timestamptz(6)
  crm_deals              crm_deals[]
  crm_pipeline_templates crm_pipeline_templates? @relation(fields: [template_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([template_id, name])
}

model crm_pipeline_templates {
  id                  Int                   @id @default(autoincrement())
  name                String                @unique @db.VarChar(100)
  description         String?
  brand               String?               @db.VarChar(50)
  is_default          Boolean?              @default(false)
  created_at          DateTime?             @default(now()) @db.Timestamptz(6)
  updated_at          DateTime?             @default(now()) @db.Timestamptz(6)
  crm_deal_types      crm_deal_types[]
  crm_pipeline_stages crm_pipeline_stages[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model crm_task_templates {
  id                Int       @id @default(autoincrement())
  trigger_event     String    @unique @db.VarChar(100)
  title             String    @db.VarChar(255)
  description       String?
  task_type         String?   @default("follow_up") @db.VarChar(50)
  priority          String?   @default("normal") @db.VarChar(20)
  days_from_trigger Int?      @default(1)
  is_active         Boolean?  @default(true)
  created_at        DateTime? @default(now()) @db.Timestamptz(6)
  updated_at        DateTime? @default(now()) @db.Timestamptz(6)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model crm_tasks {
  id                                  Int           @id @default(autoincrement())
  contact_id                          Int?
  deal_id                             Int?
  title                               String        @db.VarChar(255)
  description                         String?
  task_type                           String?       @default("follow_up") @db.VarChar(50)
  priority                            String?       @default("normal") @db.VarChar(20)
  status                              String?       @default("pending") @db.VarChar(20)
  due_date                            DateTime      @db.Date
  due_time                            DateTime?     @db.Time(6)
  reminder_at                         DateTime?     @db.Timestamptz(6)
  assigned_to                         Int?
  created_by                          Int?
  completed_at                        DateTime?     @db.Timestamptz(6)
  completed_by                        Int?
  completion_notes                    String?
  created_at                          DateTime?     @default(now()) @db.Timestamptz(6)
  updated_at                          DateTime?     @default(now()) @db.Timestamptz(6)
  users_crm_tasks_assigned_toTousers  users?        @relation("crm_tasks_assigned_toTousers", fields: [assigned_to], references: [id], onUpdate: NoAction)
  users_crm_tasks_completed_byTousers users?        @relation("crm_tasks_completed_byTousers", fields: [completed_by], references: [id], onUpdate: NoAction)
  crm_contacts                        crm_contacts? @relation(fields: [contact_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users_crm_tasks_created_byTousers   users?        @relation("crm_tasks_created_byTousers", fields: [created_by], references: [id], onUpdate: NoAction)
  crm_deals                           crm_deals?    @relation(fields: [deal_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([assigned_to, status], map: "idx_crm_tasks_assigned")
  @@index([due_date, status], map: "idx_crm_tasks_due")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model driver_status_logs {
  id           Int         @id @default(autoincrement())
  driver_id    Int
  time_card_id Int?
  status       String      @db.VarChar(50)
  change_time  DateTime    @default(now()) @db.Timestamptz(6)
  notes        String?
  created_at   DateTime?   @default(now()) @db.Timestamptz(6)
  users        users       @relation(fields: [driver_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  time_cards   time_cards? @relation(fields: [time_card_id], references: [id], onUpdate: NoAction)

  @@index([change_time(sort: Desc)], map: "idx_driver_status_logs_change_time")
  @@index([driver_id], map: "idx_driver_status_logs_driver")
  @@index([time_card_id], map: "idx_driver_status_logs_time_card")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model dvir_reports {
  id                                                            String       @id @db.VarChar(100)
  driver_id                                                     Int
  vehicle_id                                                    Int
  report_date                                                   DateTime     @default(dbgenerated("CURRENT_DATE")) @db.Date
  pre_trip_inspection_id                                        Int?
  post_trip_inspection_id                                       Int?
  defects_found                                                 Boolean?     @default(false)
  defects_description                                           Json?
  driver_signature                                              String
  mechanic_id                                                   Int?
  mechanic_signature                                            String?
  mechanic_notes                                                String?
  reviewed_at                                                   DateTime?    @db.Timestamptz(6)
  status                                                        String?      @default("submitted") @db.VarChar(50)
  created_at                                                    DateTime?    @default(now()) @db.Timestamptz(6)
  updated_at                                                    DateTime?    @default(now()) @db.Timestamptz(6)
  users_dvir_reports_driver_idTousers                           users        @relation("dvir_reports_driver_idTousers", fields: [driver_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users_dvir_reports_mechanic_idTousers                         users?       @relation("dvir_reports_mechanic_idTousers", fields: [mechanic_id], references: [id], onUpdate: NoAction)
  inspections_dvir_reports_post_trip_inspection_idToinspections inspections? @relation("dvir_reports_post_trip_inspection_idToinspections", fields: [post_trip_inspection_id], references: [id], onUpdate: NoAction)
  inspections_dvir_reports_pre_trip_inspection_idToinspections  inspections? @relation("dvir_reports_pre_trip_inspection_idToinspections", fields: [pre_trip_inspection_id], references: [id], onUpdate: NoAction)
  vehicles                                                      vehicles     @relation(fields: [vehicle_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([report_date(sort: Desc)], map: "idx_dvir_reports_date")
  @@index([driver_id], map: "idx_dvir_reports_driver")
  @@index([vehicle_id], map: "idx_dvir_reports_vehicle")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model geology_ai_guidance {
  id            Int       @id @default(autoincrement())
  guidance_type String    @db.VarChar(50)
  title         String?   @db.VarChar(255)
  content       String
  priority      Int?      @default(0)
  is_active     Boolean?  @default(true)
  created_at    DateTime? @default(now()) @db.Timestamptz(6)
  updated_at    DateTime? @default(now()) @db.Timestamptz(6)

  @@index([priority(sort: Desc)], map: "idx_geology_ai_guidance_priority")
  @@index([guidance_type], map: "idx_geology_ai_guidance_type")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model geology_chat_messages {
  id               Int             @id @default(autoincrement())
  session_id       String          @db.VarChar(64)
  role             String          @db.VarChar(20)
  content          String
  context_topic_id Int?
  context_site_id  Int?
  ip_hash          String?         @db.VarChar(64)
  created_at       DateTime?       @default(now()) @db.Timestamptz(6)
  geology_sites    geology_sites?  @relation(fields: [context_site_id], references: [id], onUpdate: NoAction)
  geology_topics   geology_topics? @relation(fields: [context_topic_id], references: [id], onUpdate: NoAction)

  @@index([created_at(sort: Desc)], map: "idx_geology_chat_created")
  @@index([session_id], map: "idx_geology_chat_session")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model geology_facts {
  id             Int             @id @default(autoincrement())
  fact_text      String
  context        String?
  fact_type      String?         @db.VarChar(50)
  topic_id       Int?
  display_order  Int?            @default(0)
  is_featured    Boolean?        @default(false)
  created_at     DateTime?       @default(now()) @db.Timestamptz(6)
  geology_topics geology_topics? @relation(fields: [topic_id], references: [id], onUpdate: NoAction)

  @@index([topic_id], map: "idx_geology_facts_topic")
  @@index([fact_type], map: "idx_geology_facts_type")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model geology_media {
  id              Int       @id @default(autoincrement())
  title           String    @db.VarChar(255)
  description     String?
  media_type      String    @db.VarChar(50)
  url             String    @db.VarChar(500)
  thumbnail_url   String?   @db.VarChar(500)
  file_size_bytes Int?
  alt_text        String?   @db.VarChar(500)
  credit          String?   @db.VarChar(255)
  caption         String?
  topic_ids       Int[]
  site_ids        Int[]
  is_featured     Boolean?  @default(false)
  created_at      DateTime? @default(now()) @db.Timestamptz(6)

  @@index([media_type], map: "idx_geology_media_type")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model geology_sites {
  id                    Int                     @id @default(autoincrement())
  name                  String                  @db.VarChar(255)
  slug                  String                  @unique @db.VarChar(150)
  description           String?
  site_type             String?                 @db.VarChar(50)
  latitude              Decimal?                @db.Decimal(10, 8)
  longitude             Decimal?                @db.Decimal(11, 8)
  address               String?                 @db.VarChar(500)
  directions            String?
  is_public_access      Boolean?                @default(true)
  requires_appointment  Boolean?                @default(false)
  best_time_to_visit    String?                 @db.VarChar(255)
  accessibility_notes   String?
  photos                Json?                   @default("[]")
  related_topic_ids     Int[]
  nearby_winery_ids     Int[]
  is_published          Boolean?                @default(false)
  created_at            DateTime?               @default(now()) @db.Timestamptz(6)
  updated_at            DateTime?               @default(now()) @db.Timestamptz(6)
  geology_chat_messages geology_chat_messages[]

  @@index([slug], map: "idx_geology_sites_slug")
  @@index([site_type], map: "idx_geology_sites_type")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model geology_topics {
  id                    Int                     @id @default(autoincrement())
  slug                  String                  @unique @db.VarChar(150)
  title                 String                  @db.VarChar(255)
  subtitle              String?                 @db.VarChar(500)
  content               String
  excerpt               String?                 @db.VarChar(500)
  topic_type            String                  @db.VarChar(50)
  difficulty            String?                 @default("general") @db.VarChar(20)
  hero_image_url        String?                 @db.VarChar(500)
  display_order         Int?                    @default(0)
  is_featured           Boolean?                @default(false)
  is_published          Boolean?                @default(false)
  related_winery_ids    Int[]
  related_topic_ids     Int[]
  author_name           String?                 @db.VarChar(255)
  sources               String?
  verified              Boolean?                @default(false)
  verified_at           DateTime?               @db.Timestamptz(6)
  created_at            DateTime?               @default(now()) @db.Timestamptz(6)
  updated_at            DateTime?               @default(now()) @db.Timestamptz(6)
  geology_chat_messages geology_chat_messages[]
  geology_facts         geology_facts[]

  @@index([display_order], map: "idx_geology_topics_display_order")
  @@index([slug], map: "idx_geology_topics_slug")
  @@index([topic_type], map: "idx_geology_topics_type")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model geology_tours {
  id                    Int       @id @default(autoincrement())
  name                  String    @db.VarChar(255)
  slug                  String    @unique @db.VarChar(150)
  tagline               String?   @db.VarChar(255)
  description           String
  duration_hours        Decimal?  @db.Decimal(3, 1)
  group_size_min        Int?      @default(2)
  group_size_max        Int?      @default(12)
  price_per_person      Decimal?  @db.Decimal(10, 2)
  private_tour_price    Decimal?  @db.Decimal(10, 2)
  available_days        String[]  @db.VarChar(50)
  start_times           String[]  @db.VarChar(10)
  seasonal_availability String?   @db.VarChar(100)
  what_included         String[]
  what_to_bring         String[]
  highlights            String[]
  site_ids              Int[]
  partner_winery_ids    Int[]
  hero_image_url        String?   @db.VarChar(500)
  is_featured           Boolean?  @default(false)
  is_active             Boolean?  @default(true)
  booking_url           String?   @db.VarChar(500)
  booking_notes         String?
  created_at            DateTime? @default(now()) @db.Timestamptz(6)
  updated_at            DateTime? @default(now()) @db.Timestamptz(6)

  @@index([slug], map: "idx_geology_tours_slug")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model hotel_partners {
  id                   Int                    @id @default(autoincrement())
  name                 String                 @db.VarChar(255)
  contact_name         String?                @db.VarChar(255)
  email                String                 @unique @db.VarChar(255)
  phone                String?                @db.VarChar(50)
  address              String?
  invite_token         String?                @unique @db.VarChar(100)
  invite_sent_at       DateTime?              @db.Timestamptz(6)
  registered_at        DateTime?              @db.Timestamptz(6)
  password_hash        String?                @db.VarChar(255)
  is_active            Boolean?               @default(true)
  commission_rate      Decimal?               @default(0.00) @db.Decimal(5, 2)
  commission_type      String?                @default("none") @db.VarChar(20)
  notes                String?
  created_at           DateTime?              @default(now()) @db.Timestamptz(6)
  updated_at           DateTime?              @default(now()) @db.Timestamptz(6)
  shared_tours_tickets shared_tours_tickets[] @ignore

  @@index([email], map: "idx_hotel_partners_email")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model integrations {
  id                      Int       @id @default(autoincrement())
  service                 String    @unique @db.VarChar(100)
  access_token_encrypted  String?
  refresh_token_encrypted String?
  token_expires_at        DateTime? @db.Timestamptz(6)
  scopes                  String[]
  metadata                Json?     @default("{}")
  is_active               Boolean?  @default(true)
  last_sync_at            DateTime? @db.Timestamptz(6)
  last_error              String?
  created_at              DateTime? @default(now()) @db.Timestamptz(6)
  updated_at              DateTime? @default(now()) @db.Timestamptz(6)

  @@index([service], map: "idx_integrations_service")
}

model kb_business_pricing {
  id                     Int            @id @default(autoincrement())
  business_id            Int?
  tasting_fee_per_person Decimal?       @db.Decimal(10, 2)
  tasting_waiver_policy  String?        @db.VarChar(255)
  activity_cost_total    Decimal?       @db.Decimal(10, 2)
  notes                  String?
  updated_at             DateTime?      @default(now()) @db.Timestamp(6)
  kb_businesses          kb_businesses? @relation(fields: [business_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([business_id], map: "idx_kb_business_pricing_business")
}

model kb_businesses {
  id                      Int                       @id @default(autoincrement())
  name                    String                    @db.VarChar(255)
  type                    String                    @db.VarChar(50)
  contact_email           String?                   @db.VarChar(255)
  contact_phone           String?                   @db.VarChar(50)
  address                 String?
  website                 String?                   @db.VarChar(255)
  verified                Boolean?                  @default(false)
  created_at              DateTime?                 @default(now()) @db.Timestamp(6)
  updated_at              DateTime?                 @default(now()) @db.Timestamp(6)
  kb_business_pricing     kb_business_pricing[]
  kb_contributions        kb_contributions[]
  kb_trusted_contributors kb_trusted_contributors[]
  users                   users[]

  @@index([type], map: "idx_kb_businesses_type")
  @@index([verified], map: "idx_kb_businesses_verified")
}

model kb_chat_messages {
  id                 Int               @id @default(autoincrement())
  session_id         String?           @db.Uuid
  role               String            @db.VarChar(20)
  content            String
  sources_used       String[]
  grounding_metadata Json?
  created_at         DateTime?         @default(now()) @db.Timestamp(6)
  kb_chat_sessions   kb_chat_sessions? @relation(fields: [session_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([session_id], map: "idx_kb_chat_messages_session")
}

model kb_chat_sessions {
  id                  String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  visitor_id          String?             @db.VarChar(255)
  visitor_profile     Json?
  started_at          DateTime?           @default(now()) @db.Timestamp(6)
  last_message_at     DateTime?           @db.Timestamp(6)
  message_count       Int?                @default(0)
  itinerary_generated Boolean?            @default(false)
  kb_chat_messages    kb_chat_messages[]
  kb_draft_bookings   kb_draft_bookings[]
  kb_itineraries      kb_itineraries[]
  kb_trip_states      kb_trip_states?

  @@index([started_at], map: "idx_kb_chat_sessions_started")
  @@index([visitor_id], map: "idx_kb_chat_sessions_visitor")
}

model kb_contributions {
  id                                           Int                 @id @default(autoincrement())
  business_id                                  Int?
  contributor_id                               Int?
  title                                        String              @db.VarChar(255)
  content_type                                 String              @db.VarChar(50)
  original_filename                            String?             @db.VarChar(255)
  content_text                                 String?
  status                                       String?             @default("pending") @db.VarChar(50)
  file_search_doc_id                           String?             @db.VarChar(255)
  topics                                       String[]
  audience_type                                String?             @db.VarChar(50)
  is_evergreen                                 Boolean?            @default(true)
  valid_from                                   DateTime?           @db.Date
  valid_until                                  DateTime?           @db.Date
  ai_prescreening                              Json?
  reviewed_by                                  Int?
  reviewed_at                                  DateTime?           @db.Timestamp(6)
  review_notes                                 String?
  rejection_reason                             String?
  created_at                                   DateTime?           @default(now()) @db.Timestamp(6)
  updated_at                                   DateTime?           @default(now()) @db.Timestamp(6)
  indexed_at                                   DateTime?           @db.Timestamp(6)
  last_retrieved_at                            DateTime?           @db.Timestamp(6)
  retrieval_count                              Int?                @default(0)
  kb_businesses                                kb_businesses?      @relation(fields: [business_id], references: [id], onUpdate: NoAction)
  users_kb_contributions_contributor_idTousers users?              @relation("kb_contributions_contributor_idTousers", fields: [contributor_id], references: [id], onUpdate: NoAction)
  users_kb_contributions_reviewed_byTousers    users?              @relation("kb_contributions_reviewed_byTousers", fields: [reviewed_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  kb_review_history                            kb_review_history[]

  @@index([business_id], map: "idx_kb_contributions_business")
  @@index([status], map: "idx_kb_contributions_status")
  @@index([content_type], map: "idx_kb_contributions_type")
}

model kb_draft_bookings {
  id                       String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  chat_session_id          String?           @db.Uuid
  itinerary_id             String?           @db.Uuid
  customer_name            String            @db.VarChar(255)
  customer_email           String            @db.VarChar(255)
  customer_phone           String?           @db.VarChar(50)
  trip_start_date          DateTime          @db.Date
  trip_end_date            DateTime          @db.Date
  party_size               Int
  party_type               String?           @db.VarChar(50)
  special_occasion         String?           @db.VarChar(255)
  itinerary_summary        Json?
  preferences              Json?
  special_requests         String?
  cost_transportation      Decimal?          @db.Decimal(10, 2)
  cost_guide               Decimal?          @db.Decimal(10, 2)
  cost_activities          Decimal?          @db.Decimal(10, 2)
  cost_tour_total          Decimal           @db.Decimal(10, 2)
  tbd_tastings_estimate    Decimal?          @db.Decimal(10, 2)
  tbd_dining_estimate      Decimal?          @db.Decimal(10, 2)
  tbd_winery_count         Int?
  deposit_percentage       Decimal?          @default(0.50) @db.Decimal(5, 2)
  deposit_base_amount      Decimal           @db.Decimal(10, 2)
  deposit_amount           Decimal           @db.Decimal(10, 2)
  stripe_payment_intent_id String?           @db.VarChar(255)
  deposit_paid_at          DateTime?         @db.Timestamp(6)
  status                   String?           @default("draft") @db.VarChar(50)
  assigned_to              Int?
  admin_notes              String?
  converted_booking_id     Int?
  created_at               DateTime?         @default(now()) @db.Timestamp(6)
  updated_at               DateTime?         @default(now()) @db.Timestamp(6)
  users                    users?            @relation(fields: [assigned_to], references: [id], onDelete: NoAction, onUpdate: NoAction)
  kb_chat_sessions         kb_chat_sessions? @relation(fields: [chat_session_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  kb_itineraries           kb_itineraries?   @relation(fields: [itinerary_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([customer_email], map: "idx_kb_draft_bookings_email")
  @@index([chat_session_id], map: "idx_kb_draft_bookings_session")
  @@index([status], map: "idx_kb_draft_bookings_status")
}

model kb_itineraries {
  id                String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  session_id        String?             @db.Uuid
  trip_start        DateTime            @db.Date
  trip_end          DateTime            @db.Date
  itinerary_data    Json
  created_at        DateTime?           @default(now()) @db.Timestamp(6)
  exported_at       DateTime?           @db.Timestamp(6)
  export_format     String?             @db.VarChar(20)
  kb_draft_bookings kb_draft_bookings[]
  kb_chat_sessions  kb_chat_sessions?   @relation(fields: [session_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([session_id], map: "idx_kb_itineraries_session")
}

model kb_pricing_config {
  id                  Int       @id @default(autoincrement())
  rate_sedan          Decimal?  @default(350.00) @db.Decimal(10, 2)
  rate_suv            Decimal?  @default(400.00) @db.Decimal(10, 2)
  rate_van            Decimal?  @default(500.00) @db.Decimal(10, 2)
  rate_sprinter       Decimal?  @default(650.00) @db.Decimal(10, 2)
  rate_guide_per_day  Decimal?  @default(300.00) @db.Decimal(10, 2)
  default_tasting_fee Decimal?  @default(25.00) @db.Decimal(10, 2)
  tasting_fee_note    String?   @default("Typically $20-50 per person, often waived with purchase") @db.VarChar(255)
  avg_breakfast       Decimal?  @default(20.00) @db.Decimal(10, 2)
  avg_lunch           Decimal?  @default(35.00) @db.Decimal(10, 2)
  avg_dinner          Decimal?  @default(75.00) @db.Decimal(10, 2)
  deposit_percentage  Decimal?  @default(0.50) @db.Decimal(5, 2)
  is_active           Boolean?  @default(true)
  updated_at          DateTime? @default(now()) @db.Timestamp(6)
  updated_by          Int?
  users               users?    @relation(fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model kb_review_history {
  id               Int               @id @default(autoincrement())
  contribution_id  Int?
  reviewer_id      Int?
  action           String            @db.VarChar(50)
  previous_status  String?           @db.VarChar(50)
  new_status       String?           @db.VarChar(50)
  notes            String?
  created_at       DateTime?         @default(now()) @db.Timestamp(6)
  kb_contributions kb_contributions? @relation(fields: [contribution_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users            users?            @relation(fields: [reviewer_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([contribution_id], map: "idx_kb_review_contribution")
}

model kb_trip_states {
  id                  String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  session_id          String?           @unique @db.Uuid
  dates_status        String?           @default("flexible") @db.VarChar(20)
  start_date          DateTime?         @db.Date
  end_date            DateTime?         @db.Date
  date_flexibility    String?
  party_size          Int?
  party_type          String?           @db.VarChar(50)
  special_occasion    String?           @db.VarChar(255)
  selections          Json?             @default("[]")
  preferences         Json?             @default("{}")
  ready_for_itinerary Boolean?          @default(false)
  ready_for_deposit   Boolean?          @default(false)
  updated_at          DateTime?         @default(now()) @db.Timestamp(6)
  kb_chat_sessions    kb_chat_sessions? @relation(fields: [session_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([session_id], map: "idx_kb_trip_states_session")
}

model kb_trusted_contributors {
  id                                               Int            @id @default(autoincrement())
  user_id                                          Int?           @unique
  business_id                                      Int?
  trust_level                                      String?        @default("standard") @db.VarChar(20)
  auto_approve_types                               String[]
  approved_count                                   Int?           @default(0)
  rejected_count                                   Int?           @default(0)
  last_rejection_at                                DateTime?      @db.Timestamp(6)
  promoted_at                                      DateTime?      @db.Timestamp(6)
  promoted_by                                      Int?
  created_at                                       DateTime?      @default(now()) @db.Timestamp(6)
  kb_businesses                                    kb_businesses? @relation(fields: [business_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users_kb_trusted_contributors_promoted_byTousers users?         @relation("kb_trusted_contributors_promoted_byTousers", fields: [promoted_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users_kb_trusted_contributors_user_idTousers     users?         @relation("kb_trusted_contributors_user_idTousers", fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([user_id], map: "idx_kb_trusted_user")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model marketing_campaigns {
  id              Int              @id @default(autoincrement())
  name            String           @db.VarChar(255)
  description     String?
  theme           String?          @db.VarChar(255)
  status          String?          @default("draft") @db.VarChar(50)
  start_date      DateTime?        @db.Date
  end_date        DateTime?        @db.Date
  channels        String[]         @default([])
  target_audience String?          @db.VarChar(255)
  budget          Decimal?         @db.Decimal(10, 2)
  goals           Json?            @default("{}")
  performance     Json?            @default("{}")
  auto_generated  Boolean?         @default(false)
  created_by      Int?
  created_at      DateTime?        @default(now()) @db.Timestamptz(6)
  updated_at      DateTime?        @default(now()) @db.Timestamptz(6)
  campaign_items  campaign_items[]
  users           users?           @relation(fields: [created_by], references: [id], onUpdate: NoAction)

  @@index([start_date, end_date], map: "idx_campaigns_dates")
  @@index([status], map: "idx_campaigns_status")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model marketing_report_logs {
  id             Int       @id @default(autoincrement())
  report_type    String    @db.VarChar(50)
  report_date    DateTime  @db.Date
  report_content String
  metrics        Json?     @default("{}")
  sent_to        String[]  @default([])
  sent_at        DateTime? @db.Timestamptz(6)
  created_at     DateTime? @default(now()) @db.Timestamptz(6)

  @@index([report_date(sort: Desc)], map: "idx_report_logs_date")
  @@index([report_type], map: "idx_report_logs_type")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model marketing_strategies {
  id                    Int               @id @default(autoincrement())
  week_start            DateTime          @db.Date
  week_end              DateTime          @db.Date
  theme                 String?           @db.VarChar(500)
  summary               String
  data_inputs           Json?             @default("{}")
  recommended_posts     Json?             @default("[]")
  keyword_opportunities Json?             @default("[]")
  content_gaps          Json?             @default("[]")
  performance_summary   Json?             @default("{}")
  status                String?           @default("draft") @db.VarChar(50)
  created_at            DateTime?         @default(now()) @db.Timestamptz(6)
  updated_at            DateTime?         @default(now()) @db.Timestamptz(6)
  execution_summary     Json?             @default("{}")
  scheduled_posts       scheduled_posts[]

  @@index([status], map: "idx_marketing_strategies_status")
  @@index([week_start(sort: Desc)], map: "idx_marketing_strategies_week")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model mileage_logs {
  id               Int       @id @default(autoincrement())
  vehicle_id       Int
  recorded_date    DateTime  @default(now()) @db.Timestamptz(6)
  mileage          Decimal   @db.Decimal(10, 1)
  previous_mileage Decimal?  @db.Decimal(10, 1)
  mileage_change   Decimal?  @db.Decimal(10, 1)
  recorded_by      Int?
  notes            String?
  created_at       DateTime? @default(now()) @db.Timestamptz(6)
  users            users?    @relation(fields: [recorded_by], references: [id], onUpdate: NoAction)
  vehicles         vehicles  @relation(fields: [vehicle_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([recorded_date(sort: Desc)], map: "idx_mileage_logs_date")
  @@index([recorded_by], map: "idx_mileage_logs_recorded_by")
  @@index([vehicle_id], map: "idx_mileage_logs_vehicle")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model page_content {
  id           Int       @id @default(autoincrement())
  page_slug    String    @db.VarChar(100)
  section_key  String    @db.VarChar(100)
  content_type String?   @default("text") @db.VarChar(50)
  content      String
  metadata     Json?     @default("{}")
  created_at   DateTime? @default(now()) @db.Timestamptz(6)
  updated_at   DateTime? @default(now()) @db.Timestamptz(6)
  updated_by   Int?
  users        users?    @relation(fields: [updated_by], references: [id], onUpdate: NoAction)

  @@unique([page_slug, section_key])
  @@index([page_slug], map: "idx_page_content_page_slug")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model page_views {
  id         Int
  session_id String    @db.VarChar(64)
  visitor_id String?   @db.VarChar(64)
  page_path  String
  page_title String?
  referrer   String?
  created_at DateTime? @default(now()) @db.Timestamptz(6)

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model scheduled_posts {
  id                   Int                   @id @default(autoincrement())
  content              String
  media_urls           String[]              @default([])
  hashtags             String[]              @default([])
  link_url             String?               @db.VarChar(2000)
  platform             String                @db.VarChar(50)
  account_id           Int?
  scheduled_for        DateTime              @db.Timestamptz(6)
  timezone             String?               @default("America/Los_Angeles") @db.VarChar(50)
  status               String?               @default("draft") @db.VarChar(50)
  buffer_post_id       String?               @db.VarChar(255)
  buffer_update_id     String?               @db.VarChar(255)
  published_at         DateTime?             @db.Timestamptz(6)
  error_message        String?
  retry_count          Int?                  @default(0)
  content_type         String?               @db.VarChar(50)
  winery_id            Int?
  impressions          Int?                  @default(0)
  engagement           Int?                  @default(0)
  clicks               Int?                  @default(0)
  shares               Int?                  @default(0)
  analytics_synced_at  DateTime?             @db.Timestamptz(6)
  ab_test_id           Int?
  variant_letter       String?               @db.VarChar(1)
  source               String?               @default("manual") @db.VarChar(50)
  suggestion_id        Int?
  created_at           DateTime?             @default(now()) @db.Timestamptz(6)
  updated_at           DateTime?             @default(now()) @db.Timestamptz(6)
  created_by           Int?
  strategy_id          Int?
  campaign_items       campaign_items[]
  content_suggestions  content_suggestions[]
  social_accounts      social_accounts?      @relation(fields: [account_id], references: [id], onUpdate: NoAction)
  users                users?                @relation(fields: [created_by], references: [id], onUpdate: NoAction)
  marketing_strategies marketing_strategies? @relation(fields: [strategy_id], references: [id], onUpdate: NoAction)
  trending_topics      trending_topics[]

  @@index([account_id], map: "idx_scheduled_posts_account")
  @@index([scheduled_for, status], map: "idx_scheduled_posts_date_range")
  @@index([platform], map: "idx_scheduled_posts_platform")
  @@index([scheduled_for], map: "idx_scheduled_posts_scheduled_for")
  @@index([status], map: "idx_scheduled_posts_status")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model search_console_data {
  id          Int       @id @default(autoincrement())
  data_date   DateTime  @db.Date
  page_url    String    @db.VarChar(2000)
  query       String?   @db.VarChar(1000)
  country     String?   @default("usa") @db.VarChar(10)
  device      String?   @default("all") @db.VarChar(20)
  impressions Int?      @default(0)
  clicks      Int?      @default(0)
  ctr         Decimal?  @default(0) @db.Decimal(5, 4)
  position    Decimal?  @default(0) @db.Decimal(5, 2)
  created_at  DateTime? @default(now()) @db.Timestamptz(6)

  @@index([data_date(sort: Desc)], map: "idx_search_console_date")
  @@index([page_url], map: "idx_search_console_page")
  @@index([query], map: "idx_search_console_query")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model shared_tour_presets {
  id                     Int       @id @default(autoincrement())
  name                   String    @db.VarChar(100)
  start_time             DateTime? @default(dbgenerated("'11:00:00'::time without time zone")) @db.Time(6)
  duration_hours         Decimal?  @default(6) @db.Decimal(3, 1)
  base_price_per_person  Decimal?  @default(95) @db.Decimal(10, 2)
  lunch_price_per_person Decimal?  @default(115) @db.Decimal(10, 2)
  title                  String?   @db.VarChar(255)
  description            String?
  max_guests             Int?      @default(14)
  min_guests             Int?      @default(2)
  is_default             Boolean?  @default(false)
  sort_order             Int?      @default(0)
  created_at             DateTime? @default(now()) @db.Timestamptz(6)
  updated_at             DateTime? @default(now()) @db.Timestamptz(6)

  @@index([sort_order], map: "idx_shared_tour_presets_sort")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model social_accounts {
  id                      Int               @id @default(autoincrement())
  platform                String            @db.VarChar(50)
  account_name            String?           @db.VarChar(255)
  account_username        String?           @db.VarChar(255)
  buffer_profile_id       String?           @db.VarChar(255)
  external_account_id     String?           @db.VarChar(255)
  access_token_encrypted  String?
  refresh_token_encrypted String?
  token_expires_at        DateTime?         @db.Timestamptz(6)
  profile_ids             Json?             @default("[]")
  avatar_url              String?           @db.VarChar(500)
  is_active               Boolean?          @default(true)
  connection_status       String?           @default("connected") @db.VarChar(50)
  last_error              String?
  last_sync_at            DateTime?         @db.Timestamptz(6)
  created_at              DateTime?         @default(now()) @db.Timestamptz(6)
  updated_at              DateTime?         @default(now()) @db.Timestamptz(6)
  connected_by            Int?
  scheduled_posts         scheduled_posts[]
  users                   users?            @relation(fields: [connected_by], references: [id], onUpdate: NoAction)

  @@index([platform], map: "idx_social_accounts_platform")
  @@index([connection_status], map: "idx_social_accounts_status")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model trending_topics {
  id                Int              @id @default(autoincrement())
  topic             String           @db.VarChar(500)
  category          String?          @db.VarChar(100)
  summary           String
  relevance_score   Int?             @default(5)
  suggested_content String?
  suggested_angle   String?
  source_urls       String[]         @default([])
  detected_at       DateTime?        @default(now()) @db.Timestamptz(6)
  expires_at        DateTime?        @db.Timestamptz(6)
  status            String?          @default("new") @db.VarChar(50)
  actioned_post_id  Int?
  created_at        DateTime?        @default(now()) @db.Timestamptz(6)
  updated_at        DateTime?        @default(now()) @db.Timestamptz(6)
  scheduled_posts   scheduled_posts? @relation(fields: [actioned_post_id], references: [id], onUpdate: NoAction)

  @@index([category], map: "idx_trending_topics_category")
  @@index([detected_at(sort: Desc)], map: "idx_trending_topics_detected")
  @@index([status], map: "idx_trending_topics_status")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model trip_activity_log {
  id            Int       @id @default(autoincrement())
  trip_id       Int
  activity_type String    @db.VarChar(100)
  description   String?
  actor_type    String?   @db.VarChar(50)
  actor_name    String?   @db.VarChar(255)
  metadata      Json?
  created_at    DateTime? @default(now()) @db.Timestamptz(6)
  trips         trips     @relation(fields: [trip_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([created_at(sort: Desc)], map: "idx_trip_activity_created_at")
  @@index([trip_id], map: "idx_trip_activity_trip_id")
  @@index([activity_type], map: "idx_trip_activity_type")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model trip_estimate_items {
  id               Int            @id @default(autoincrement())
  trip_estimate_id Int
  category         String         @db.VarChar(50)
  description      String?
  quantity         Decimal?       @default(1) @db.Decimal(10, 2)
  unit_label       String?        @db.VarChar(50)
  unit_price       Decimal?       @default(0) @db.Decimal(10, 2)
  total_price      Decimal?       @default(0) @db.Decimal(10, 2)
  notes            String?
  sort_order       Int?           @default(0)
  created_at       DateTime?      @default(now()) @db.Timestamptz(6)
  updated_at       DateTime?      @default(now()) @db.Timestamptz(6)
  trip_estimates   trip_estimates @relation(fields: [trip_estimate_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([trip_estimate_id], map: "idx_trip_estimate_items_estimate")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model trip_estimates {
  id                  Int                   @id @default(autoincrement())
  estimate_number     String                @unique @db.VarChar(20)
  customer_name       String                @db.VarChar(255)
  customer_email      String?               @db.VarChar(255)
  customer_phone      String?               @db.VarChar(50)
  trip_type           String?               @default("wine_tour") @db.VarChar(50)
  trip_title          String?               @db.VarChar(255)
  trip_description    String?
  start_date          DateTime?             @db.Date
  end_date            DateTime?             @db.Date
  party_size          Int?                  @default(2)
  subtotal            Decimal?              @default(0) @db.Decimal(10, 2)
  deposit_amount      Decimal?              @default(0) @db.Decimal(10, 2)
  deposit_reason      String?
  deposit_paid        Boolean?              @default(false)
  deposit_paid_at     DateTime?             @db.Timestamptz(6)
  payment_intent_id   String?               @db.VarChar(255)
  status              String?               @default("draft") @db.VarChar(20)
  trip_proposal_id    Int?
  valid_until         DateTime?             @db.Date
  brand_id            Int?
  created_by          Int?
  created_at          DateTime?             @default(now()) @db.Timestamptz(6)
  updated_at          DateTime?             @default(now()) @db.Timestamptz(6)
  trip_estimate_items trip_estimate_items[]
  trip_proposals      trip_proposals?       @relation(fields: [trip_proposal_id], references: [id], onUpdate: NoAction)

  @@index([created_at(sort: Desc)], map: "idx_trip_estimates_created_at")
  @@index([customer_email], map: "idx_trip_estimates_customer_email")
  @@index([estimate_number], map: "idx_trip_estimates_number")
  @@index([status], map: "idx_trip_estimates_status")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model trip_guests {
  id                   Int       @id @default(autoincrement())
  trip_id              Int
  name                 String    @db.VarChar(255)
  email                String?   @db.VarChar(255)
  phone                String?   @db.VarChar(50)
  rsvp_status          String?   @default("pending") @db.VarChar(50)
  rsvp_responded_at    DateTime? @db.Timestamptz(6)
  rsvp_notes           String?
  is_organizer         Boolean?  @default(false)
  dietary_restrictions String?
  accessibility_needs  String?
  invite_sent_at       DateTime? @db.Timestamptz(6)
  last_viewed_at       DateTime? @db.Timestamptz(6)
  created_at           DateTime? @default(now()) @db.Timestamptz(6)
  updated_at           DateTime? @default(now()) @db.Timestamptz(6)
  trips                trips     @relation(fields: [trip_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([email], map: "idx_trip_guests_email")
  @@index([trip_id, rsvp_status], map: "idx_trip_guests_rsvp_status")
  @@index([trip_id], map: "idx_trip_guests_trip_id")
}

model trip_proposal_activity {
  id               Int            @id @default(autoincrement())
  trip_proposal_id Int
  action           String         @db.VarChar(100)
  description      String?
  actor_type       String?        @db.VarChar(30)
  actor_name       String?        @db.VarChar(255)
  actor_user_id    Int?
  metadata         Json?          @default("{}")
  ip_address       String?        @db.VarChar(50)
  user_agent       String?
  created_at       DateTime?      @default(now()) @db.Timestamptz(6)
  users            users?         @relation(fields: [actor_user_id], references: [id], onUpdate: NoAction)
  trip_proposals   trip_proposals @relation(fields: [trip_proposal_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([action], map: "idx_trip_proposal_activity_action")
  @@index([created_at(sort: Desc)], map: "idx_trip_proposal_activity_created")
  @@index([trip_proposal_id], map: "idx_trip_proposal_activity_proposal")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model trip_proposal_days {
  id                  Int                   @id @default(autoincrement())
  trip_proposal_id    Int
  day_number          Int
  date                DateTime              @db.Date
  title               String?               @db.VarChar(255)
  description         String?
  subtotal            Decimal?              @default(0) @db.Decimal(10, 2)
  notes               String?
  internal_notes      String?
  created_at          DateTime?             @default(now()) @db.Timestamptz(6)
  updated_at          DateTime?             @default(now()) @db.Timestamptz(6)
  trip_proposals      trip_proposals        @relation(fields: [trip_proposal_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  trip_proposal_stops trip_proposal_stops[]

  @@unique([trip_proposal_id, day_number])
  @@index([date], map: "idx_trip_proposal_days_date")
  @@index([trip_proposal_id], map: "idx_trip_proposal_days_proposal")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model trip_proposal_guests {
  id                   Int            @id @default(autoincrement())
  trip_proposal_id     Int
  name                 String         @db.VarChar(255)
  email                String?        @db.VarChar(255)
  phone                String?        @db.VarChar(50)
  is_primary           Boolean?       @default(false)
  dietary_restrictions String?
  accessibility_needs  String?
  special_requests     String?
  room_assignment      String?        @db.VarChar(100)
  rsvp_status          String?        @default("pending") @db.VarChar(30)
  rsvp_responded_at    DateTime?      @db.Timestamptz(6)
  created_at           DateTime?      @default(now()) @db.Timestamptz(6)
  updated_at           DateTime?      @default(now()) @db.Timestamptz(6)
  trip_proposals       trip_proposals @relation(fields: [trip_proposal_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([email], map: "idx_trip_proposal_guests_email")
  @@index([trip_proposal_id], map: "idx_trip_proposal_guests_proposal")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model trip_proposal_inclusions {
  id               Int            @id @default(autoincrement())
  trip_proposal_id Int
  inclusion_type   String         @db.VarChar(50)
  description      String
  quantity         Decimal?       @default(1) @db.Decimal(10, 2)
  unit             String?        @db.VarChar(50)
  unit_price       Decimal?       @default(0) @db.Decimal(10, 2)
  total_price      Decimal?       @default(0) @db.Decimal(10, 2)
  sort_order       Int?           @default(0)
  show_on_proposal Boolean?       @default(true)
  notes            String?
  created_at       DateTime?      @default(now()) @db.Timestamptz(6)
  updated_at       DateTime?      @default(now()) @db.Timestamptz(6)
  trip_proposals   trip_proposals @relation(fields: [trip_proposal_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([trip_proposal_id], map: "idx_trip_proposal_inclusions_proposal")
  @@index([inclusion_type], map: "idx_trip_proposal_inclusions_type")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model trip_proposal_stops {
  id                       Int                @id @default(autoincrement())
  trip_proposal_day_id     Int
  stop_order               Int
  stop_type                String             @db.VarChar(50)
  winery_id                Int?
  restaurant_id            Int?
  hotel_id                 Int?
  custom_name              String?            @db.VarChar(255)
  custom_address           String?
  custom_description       String?
  scheduled_time           DateTime?          @db.Time(6)
  duration_minutes         Int?
  per_person_cost          Decimal?           @default(0) @db.Decimal(10, 2)
  flat_cost                Decimal?           @default(0) @db.Decimal(10, 2)
  cost_note                String?
  room_rate                Decimal?           @default(0) @db.Decimal(10, 2)
  num_rooms                Int?               @default(0)
  nights                   Int?               @default(1)
  reservation_status       String?            @default("pending") @db.VarChar(30)
  reservation_confirmation String?            @db.VarChar(100)
  reservation_contact      String?            @db.VarChar(255)
  reservation_notes        String?
  client_notes             String?
  internal_notes           String?
  driver_notes             String?
  created_at               DateTime?          @default(now()) @db.Timestamptz(6)
  updated_at               DateTime?          @default(now()) @db.Timestamptz(6)
  hotels                   hotels?            @relation(fields: [hotel_id], references: [id], onUpdate: NoAction)
  restaurants              restaurants?       @relation(fields: [restaurant_id], references: [id], onUpdate: NoAction)
  trip_proposal_days       trip_proposal_days @relation(fields: [trip_proposal_day_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  wineries                 wineries?          @relation(fields: [winery_id], references: [id], onUpdate: NoAction)

  @@index([trip_proposal_day_id], map: "idx_trip_proposal_stops_day")
  @@index([trip_proposal_day_id, stop_order], map: "idx_trip_proposal_stops_order")
  @@index([stop_type], map: "idx_trip_proposal_stops_type")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model trip_proposals {
  id                                                   Int                        @id @default(autoincrement())
  proposal_number                                      String                     @unique @db.VarChar(30)
  status                                               String?                    @default("draft") @db.VarChar(30)
  customer_name                                        String                     @db.VarChar(255)
  customer_email                                       String?                    @db.VarChar(255)
  customer_phone                                       String?                    @db.VarChar(50)
  customer_company                                     String?                    @db.VarChar(255)
  customer_id                                          Int?
  trip_type                                            String?                    @default("wine_tour") @db.VarChar(50)
  trip_title                                           String?                    @db.VarChar(255)
  party_size                                           Int
  start_date                                           DateTime                   @db.Date
  end_date                                             DateTime?                  @db.Date
  subtotal                                             Decimal?                   @default(0) @db.Decimal(10, 2)
  discount_amount                                      Decimal?                   @default(0) @db.Decimal(10, 2)
  discount_percentage                                  Decimal?                   @default(0) @db.Decimal(5, 2)
  discount_reason                                      String?
  taxes                                                Decimal?                   @default(0) @db.Decimal(10, 2)
  tax_rate                                             Decimal?                   @default(0.091) @db.Decimal(5, 4)
  gratuity_percentage                                  Int?                       @default(0)
  gratuity_amount                                      Decimal?                   @default(0) @db.Decimal(10, 2)
  total                                                Decimal?                   @default(0) @db.Decimal(10, 2)
  deposit_percentage                                   Int?                       @default(50)
  deposit_amount                                       Decimal?                   @default(0) @db.Decimal(10, 2)
  deposit_paid                                         Boolean?                   @default(false)
  deposit_paid_at                                      DateTime?                  @db.Timestamptz(6)
  deposit_payment_id                                   Int?
  balance_due                                          Decimal?                   @default(0) @db.Decimal(10, 2)
  balance_paid                                         Boolean?                   @default(false)
  balance_paid_at                                      DateTime?                  @db.Timestamptz(6)
  balance_payment_id                                   Int?
  valid_until                                          DateTime?                  @db.Date
  brand_id                                             Int?
  introduction                                         String?
  special_notes                                        String?
  internal_notes                                       String?
  converted_to_booking_id                              Int?
  converted_at                                         DateTime?                  @db.Timestamptz(6)
  first_viewed_at                                      DateTime?                  @db.Timestamptz(6)
  last_viewed_at                                       DateTime?                  @db.Timestamptz(6)
  view_count                                           Int?                       @default(0)
  accepted_at                                          DateTime?                  @db.Timestamptz(6)
  accepted_signature                                   String?
  accepted_ip                                          String?                    @db.VarChar(50)
  sent_at                                              DateTime?                  @db.Timestamptz(6)
  created_by                                           Int?
  created_at                                           DateTime?                  @default(now()) @db.Timestamptz(6)
  updated_at                                           DateTime?                  @default(now()) @db.Timestamptz(6)
  trip_estimates                                       trip_estimates[]
  trip_proposal_activity                               trip_proposal_activity[]
  trip_proposal_days                                   trip_proposal_days[]
  trip_proposal_guests                                 trip_proposal_guests[]
  trip_proposal_inclusions                             trip_proposal_inclusions[]
  payments_trip_proposals_balance_payment_idTopayments payments?                  @relation("trip_proposals_balance_payment_idTopayments", fields: [balance_payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  brands                                               brands?                    @relation(fields: [brand_id], references: [id], onUpdate: NoAction)
  bookings                                             bookings?                  @relation(fields: [converted_to_booking_id], references: [id], onUpdate: NoAction)
  users                                                users?                     @relation(fields: [created_by], references: [id], onUpdate: NoAction)
  customers                                            customers?                 @relation(fields: [customer_id], references: [id], onUpdate: NoAction)
  payments_trip_proposals_deposit_payment_idTopayments payments?                  @relation("trip_proposals_deposit_payment_idTopayments", fields: [deposit_payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([brand_id], map: "idx_trip_proposals_brand")
  @@index([created_at(sort: Desc)], map: "idx_trip_proposals_created")
  @@index([customer_email], map: "idx_trip_proposals_customer_email")
  @@index([proposal_number], map: "idx_trip_proposals_number")
  @@index([start_date], map: "idx_trip_proposals_start_date")
  @@index([status], map: "idx_trip_proposals_status")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model trip_stops {
  id                        Int       @id @default(autoincrement())
  trip_id                   Int
  stop_type                 String    @db.VarChar(50)
  name                      String    @db.VarChar(255)
  description               String?
  winery_id                 Int?
  day_number                Int?      @default(1)
  stop_order                Int?      @default(0)
  planned_arrival           String?   @db.VarChar(10)
  planned_departure         String?   @db.VarChar(10)
  duration_minutes          Int?
  status                    String?   @default("suggested") @db.VarChar(50)
  booking_confirmation      String?   @db.VarChar(100)
  notes                     String?
  special_requests          String?
  estimated_cost_per_person Decimal?  @db.Decimal(10, 2)
  added_by                  String?   @db.VarChar(255)
  created_at                DateTime? @default(now()) @db.Timestamptz(6)
  updated_at                DateTime? @default(now()) @db.Timestamptz(6)
  trips                     trips     @relation(fields: [trip_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([trip_id, day_number, stop_order], map: "idx_trip_stops_day_order")
  @@index([trip_id], map: "idx_trip_stops_trip_id")
  @@index([winery_id], map: "idx_trip_stops_winery_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model trips {
  id                      Int                 @id @default(autoincrement())
  share_code              String              @unique @db.VarChar(16)
  title                   String              @db.VarChar(255)
  description             String?
  trip_type               String?             @default("wine_tour") @db.VarChar(50)
  start_date              DateTime?           @db.Date
  end_date                DateTime?           @db.Date
  dates_flexible          Boolean?            @default(true)
  expected_guests         Int?                @default(2)
  confirmed_guests        Int?                @default(0)
  owner_name              String?             @db.VarChar(255)
  owner_email             String?             @db.VarChar(255)
  owner_phone             String?             @db.VarChar(50)
  preferences             Json?               @default("{\"pace\": \"moderate\", \"budget\": \"moderate\", \"transportation\": \"undecided\"}")
  is_public               Boolean?            @default(false)
  allow_guest_suggestions Boolean?            @default(true)
  allow_guest_rsvp        Boolean?            @default(true)
  status                  String?             @default("draft") @db.VarChar(50)
  handoff_requested_at    DateTime?           @db.Timestamptz(6)
  handoff_notes           String?
  assigned_staff_id       Int?
  converted_to_booking_id Int?
  created_at              DateTime?           @default(now()) @db.Timestamptz(6)
  updated_at              DateTime?           @default(now()) @db.Timestamptz(6)
  last_activity_at        DateTime?           @default(now()) @db.Timestamptz(6)
  trip_activity_log       trip_activity_log[]
  trip_guests             trip_guests[]
  trip_stops              trip_stops[]

  @@index([created_at(sort: Desc)], map: "idx_trips_created_at")
  @@index([owner_email], map: "idx_trips_owner_email")
  @@index([share_code], map: "idx_trips_share_code")
  @@index([status], map: "idx_trips_status")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model vehicle_alerts {
  id                                      Int       @id @default(autoincrement())
  vehicle_id                              Int
  alert_type                              String    @db.VarChar(50)
  severity                                String    @default("info") @db.VarChar(20)
  message                                 String
  resolved_at                             DateTime? @db.Timestamptz(6)
  resolved_by                             Int?
  resolution_notes                        String?
  created_by                              Int?
  created_at                              DateTime? @default(now()) @db.Timestamptz(6)
  updated_at                              DateTime? @default(now()) @db.Timestamptz(6)
  users_vehicle_alerts_created_byTousers  users?    @relation("vehicle_alerts_created_byTousers", fields: [created_by], references: [id], onUpdate: NoAction)
  users_vehicle_alerts_resolved_byTousers users?    @relation("vehicle_alerts_resolved_byTousers", fields: [resolved_by], references: [id], onUpdate: NoAction)
  vehicles                                vehicles  @relation(fields: [vehicle_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([vehicle_id, alert_type])
  @@index([alert_type], map: "idx_vehicle_alerts_type")
  @@index([vehicle_id], map: "idx_vehicle_alerts_vehicle")
}

model winery_insider_tips {
  id            Int       @id @default(autoincrement())
  winery_id     Int
  tip_type      String    @db.VarChar(50)
  title         String?   @db.VarChar(255)
  content       String
  created_by    Int?
  data_source   String?   @db.VarChar(50)
  verified      Boolean?  @default(false)
  verified_by   Int?
  verified_at   DateTime? @db.Timestamptz(6)
  is_featured   Boolean?  @default(false)
  display_order Int?      @default(0)
  created_at    DateTime? @default(now()) @db.Timestamptz(6)
  updated_at    DateTime? @default(now()) @db.Timestamptz(6)

  @@index([tip_type], map: "idx_winery_insider_tips_type")
  @@index([winery_id], map: "idx_winery_insider_tips_winery")
}
